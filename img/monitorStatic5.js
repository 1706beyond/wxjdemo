function sConfirm(e,t,i,n){var o,a,s,r,l,c,d,f,h,g,v,u,p="",m={en:{content:"Thank\x10you\x10for\x10contacting\x10us\x02C\x10we\x10will\x10get\x10back\x10to\x10you\x10ASAP\x11",okay:"ok",cancel:"cancel"},zh:{content:"\u8c22\u8c22\u60a8\u4e0e\u6211\u4eec\u8054\u7cfb\uff0c\u6211\u4eec\u4f1a\u5c3d\u5feb\u56de\u590d\u60a8\u7684\uff01",okay:"\u786e\u5b9a",cancel:"\u53d6\u6d88"},ja:{content:"Thank\x10you\x10for\x10contacting\x10us\x02C\x10we\x10will\x10get\x10back\x10to\x10you\x10ASAP\x11",okay:"\u6c7a\u5b9a\u3059\u308b",cancel:"\u53d6\u6d88"},zh_TW:{content:"Thank\x10you\x10for\x10contacting\x10us\x02C\x10we\x10will\x10get\x10back\x10to\x10you\x10ASAP\x11",okay:"\u78ba\u5b9a",cancel:"\u53d6\u6d88"},ko:{content:"Thank\x10you\x10for\x10contacting\x10us\x02C\x10we\x10will\x10get\x10back\x10to\x10you\x10ASAP\x11",okay:"\uacb0\uc815",cancel:"\ucde8\uc18c"}};live800_Language="undefined"!=typeof live800_Language?live800_Language:(window.navigator.language||window.navigator.browserLanguage).indexOf("zh")>=0?"zh":window.navigator.language||window.navigator.browserLanguage,"undefined"!=typeof live800_baseUrl&&"undefined"!=typeof live800_baseWebApp&&(o="https:"==document.location.protocol||isChatWindowViaSSL?"https://":"http://",p=o+live800_baseUrl+live800_baseWebApp+"/chatClient/"),null!=document.body&&(null==e&&(e=m[live800_Language].content),null==t&&(t=m[live800_Language].okay),null==i&&(i=m[live800_Language].cancel),a=window.screen.width,s=getbodyHeight(),r=400,l=163,25,c="#EBEBEB",d="#434343",f="#15A3DB",h="14px",g="60px",(v=document.createElement("div")).setAttribute("id","live800_bgDiv"),v.style.position="absolute",v.style.top="0",v.style.background="#777",v.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity=50)",v.style.opacity="0.6",v.style.left="0",v.style.width=a+"px",v.style.height=s+"px",v.style.zIndex="2147480001",document.body.appendChild(v),(u=document.createElement("div")).setAttribute("id","live800_msgDiv"),u.setAttribute("align","center"),u.style.background="white",u.style.border="1px solid "+c,u.style.position="fixed",-[1]||window.XMLHttpRequest||(u.style.position="absolute"),u.style.left="50%",u.style.top="50%",u.style.marginLeft="-225px",u.style.marginTop="-75px",u.style.width=r+"px",u.style.height=l+"px",u.style.textAlign="center",u.style.lineHeight="25px",u.style.zIndex="2147480002",u.style.fontFamily="microsoft yahei",u.style.border="1px solid "+c,u.innerHTML="<div style='width:100%;border-bottom:1px solid "+c+";height:45px;line-height:45px;text-align:right;'><img style='margin-top:14px;display:inline;margin-left:22px;float:left;' src='"+p+"version5/h/images/logo.png'><img id='closeImg' src='"+p+"version5/h/images/close1.png' style='margin-top:12px;display:inline;margin-right:22px;cursor:pointer;' onmouseover=\"this.src='"+p+"version5/h/images/close2.png';\" onmouseout=\"this.src='"+p+"version5/h/images/close1.png';\"></div><div style='width:100%;height:"+g+";line-height:"+g+";font-size:"+h+";'><span style='margin-left:22px;color:"+d+";'>"+e+"</span></div><div style='width:100%;height:55px;text-align:right;'><input id='sure' type='button' value='"+t+"' style='background-color:"+f+";font-size:"+h+";color:white;width:95px;height:35px;margin:0 22px 0 0;border-radius:4px;border:1px solid;cursor:pointer;font-family:\"microsoft yahei\";font-style:normal;padding:0;'/><input id='cancel' type='button' value='"+i+"'  style='background-color:white;font-size:14px;width:95px;height:35px;margin:0 22px 0 0;border-radius:4px;border:1px solid #EBEBEB;cursor:pointer;font-family:\"microsoft yahei\";font-style:normal;padding:0;'/></div>",document.body.appendChild(u),document.getElementById("sure").onclick=function(){document.body.removeChild(v),document.body.removeChild(u),n()},document.getElementById("cancel").onclick=function(){document.body.removeChild(v),document.body.removeChild(u)},document.getElementById("closeImg").onclick=function(){document.body.removeChild(v),document.body.removeChild(u)})}function getClassName(e,t){var i,n,o,a,s;if(document.getElementsByClassName)return e.getElementsByClassName(t);for(i=e.getElementsByTagName("div"),n=[],o=[],a=0;a<i.length;a++)for(o=i[a].className.split(" "),s=0;s<o.length;s++)o[s]==t&&n.push(i[a]);return n}function getbodyHeight(){var e=document;return Math.max(Math.max(e.body.scrollHeight,e.documentElement.scrollHeight),Math.max(e.body.offsetHeight,e.documentElement.offsetHeight),Math.max(e.body.clientHeight,e.documentElement.clientHeight))}!function(d){function changeScrollTop(e){e?(documentScrollTop=document.body.scrollTop,setTimeout(function(){document.body.scrollTop=document.body.scrollHeight},400)):document.body.scrollTop=documentScrollTop}function navigateToUrl(e,t,i){try{globalVisitHandle.pageChater.closePageChat()}catch(a){}var n,o=document.getElementById("live800:link");if(t+="undefined"!=typeof live800_chatVersion&&5==live800_chatVersion?(new Date).getTime():"",document.all&&isNeedCheckDomainBinding)if(document.URL.indexOf("preview.jsp")>-1)n=window.open(e,t,i);else try{n=window.open("about:blank",t,i),o.target=t,o.href=e,o.click()}catch(a){}else n=window.open(e,t,i);return void 0!==n&&n.focus(),n}function loadConfig(){return{companyId:live800_companyID,enterurl:enterurl||fn.urlDecode(document.URL),jid:"undefined"!=typeof jid?jid:-1,insidePageSkillId:"undefined"!=typeof insidePageSkillId?insidePageSkillId:-1,baseurl:live800_baseUrl,baseHtmlUrl:live800_baseHtmlUrl,baseWebApp:live800_baseUrl+live800_baseWebApp,baseChatHtmlDir:vis.getProtocol()+"//"+live800_baseUrl+live800_baseWebApp+live800_baseChatHtmlDir,webAppUrl:vis.getProtocol()+"//"+live800_baseHtmlUrl+live800_baseWebApp,status:live800_status,locale:live800_Language,surferNumber:"undefined"!=typeof live800_surfer_number?live800_surfer_number:0,configId:monitor_live800_configID,configContent:monitor_live800_configContent,customContent:"undefined"!=typeof live800_custom_config?live800_custom_config:"",inviteContent:"undefined"!=typeof live800_inviteContent?live800_inviteContent:"",visitorAddr:"undefined"!=typeof live800_visitorAddr?live800_visitorAddr:"",accept:invite_accept||"%E5%BC%80%E5%A7%8B%E4%BA%A4%E8%B0%88",cancel:invite_cancel||"%E5%BE%85%E4%BC%9A%E5%86%8D%E8%AF%B4",visitorIDInSession:live800_companyID+"chater",visitorInfo:"undefined"!=typeof trustfulInfo?"info="+trustfulInfo:"",scriptPath:vis.getProtocol()+"//"+live800_baseHtmlUrl+live800_baseWebApp+"/chatClient",servers:"undefined"!=typeof server_prefix_list?server_prefix_list:[vis.getProtocol()+"//"+live800_baseUrl+live800_baseWebApp]}}function JSONRequest(e,t,i,n){this.url=e,this.onload=i,this.onerror=n||this.defaultError,this.init(e,t)}function RpcMethod(e,t,i,n,o,a){this.serviceName=e,this.cmdNo=t,this.params=i,this.retryTimes=n,this.onSuccess=o,this.onError=a}function SendDriver(){this.busy=!1,this.rpcImage=null}function ReceiveDriver(){var e=cfg.webAppUrl;window.cmdDomain&&(e=vis.getProtocol()+"//"+cmdDomain+live800_baseWebApp),this.receiveDriverListeners=[],this.loadingTag=!1,this.lastMsgTime="-1",this.tagImage=new Image,this.tags=[],this.receiveTimer=null,this.exceptiontime=0;var t=vis.getParam(),i=cfg.visitorInfo;this.tagUrl=e+"/SurferServer"+jsessionId+"?cmd=101&companyID="+cfg.companyId+(""!=i?"&"+i:"")+(""!=t?"&"+t:"")+(cfg.locale&&""!=cfg.locale?"&lan="+cfg.locale:""),this.firstTagUrl="",this.firstTagSuccess=!1,this.localTyping=!1,this.reconnFlag=!1,this.csd=10,this.reconntime=0,this.initTags()}function VisitServer(){this.visitServerTimer=null}function VisitClient(){this.messageListeners=[],this.pageChating=!1,globalReceiveDriver.addReceiveDriverListener(this)}function VisitHandle(){this.chatWindow=null,this.delayTimer=null,this.initListener();var e=this;setTimeout(function(){e.pageChater=new PageChater,"undefined"!=typeof autoChat&&1==autoChat&&(fn.get("chat_iframe")||globalVisitHandle.openInitiatedChat(!1))},0),this.autoInitialChat()}function InviteWindow(){this.inviteText="",this.lastTop=-1,this.lastLeft=-1,this.showInvite=!1,this.inviteInnerHtml=null,this.isauto=!0,this.inviteHandled=!0,this.operatorInvite=!0,this.toBottom=!0,this.toRight=!0,this.floatTop=150,this.isLock=!1,this.floattimer="f",this.canFixed=!0}function MobileIcon(){this.color="f",this.chat_words="",this.tel_open="",this.tel_words="",this.tel_number="",this.icon_position="",this.isDisplay=!0,this.chat_offwords="",this.company_status=0,this.init()}function PageChater(){this.client=globalVisitClient,this.handle=globalVisitHandle,this.invite="undefined"!=typeof globalInviteWindow?globalInviteWindow:null,this.icon="undefined"!=typeof globalMobileIcon?globalMobileIcon:{},this.pageMessager=new PageMessager,this.unreadMessNum=0}function PageMessager(e){this.receiver=e,this.origin="",this.media=["iframe","parent"]}if(!d.body||"1"!=d.body.getAttribute("lim:initchat")){var isIE6=!1,isMobile=!1,isSougou=!1,isSSLReq=!1,scripts=document.scripts;try{for(var i=0;i<scripts.length;i++)scripts[i].src.indexOf("monitor.js")>-1&&scripts[i].src.indexOf("https:")>-1&&(isSSLReq=!0)}catch(e){}"undefined"==typeof jsessionId&&(window.jsessionId="");var browserDect=function(e,t){this.bname="",this.bversion="",this.os="",this.ismobile=0,this.width=e.screen.width,this.height=e.screen.height,this.ua=t.toLowerCase(),function(e){for(var t=[{reg:/360se/,name:"360se"},{reg:/360ee/,name:"360ee"},{reg:/lbbrowser/,name:"lbbrowser"},{reg:/maxthon\s((\d+\.)+\d+)/,name:"maxthon"},{reg:/se\s\d+\.x/,name:"sougou"},{reg:/(qqbrowser|mqqbrowswer)\/(\d+)/,name:"qqbrowser"},{reg:/tencenttraveler\s((\d+\.)+\d+)|qqbrowser\/(\d+)/,name:"tencenttraveler"},{reg:/greenbrowser/,name:"greenbrowser"},{reg:/the world/,name:"theworld"},{reg:/myie(\d)/,name:"myie"},{reg:/msie\s(\d+\.\d+)/,name:"ie"},{reg:/baidu|bidubrowser/,name:"baidu"},{reg:/ucweb(?:\/)?(\d+\.\d+)?/,name:"ucweb"},{reg:/(ucbrowser|ubrowser)\/((\d+\.)+\d+)/,name:"ucweb"},{reg:/version\/((\d+\.)+\d+)\s(?:.*)safari/,name:"safari"},{reg:/android.*version\/((\d+\.)+\d+)\s(?:.*)safari/,name:"qqbrowser"},{reg:/cpu.*version\/((\d+\.)+\d+)\s(?:.*)safari/,name:"safari"},{reg:/chrome\/((\d+\.)+\d+)\s(?:.*)edge/,name:"edge"},{reg:/chrome\/((\d+\.)+\d+)/,name:"chrome"},{reg:/[cC]ri[oO][sS]\/((\d+\.)+\d+)/,name:"chrome"},{reg:/(?=firefox.+)navigator\/((\d+\.)+\d+)|netscape\/((\d+\.)+\d+)/,name:"netscape"},{reg:/firefox\/((\d+\.)+\d+)/,name:"firefox"},{reg:/opera\/((\d+\.)+\d+)/,name:"opera"}],i=0;i<t.length;i++){var n=e.ua.match(t[i].reg);if(n){e.bname=t[i].name,n[1]&&(e.bversion=n[1]);break}}var o=e.ua.match(/trident\/7.*rv[ :]*11/);"ActiveXObject"in window&&o&&0!=o.length&&0!=o[0].length&&(e.bversion="11.0",e.bname="ie");var a={windows98:/windows\s98/,windowsme:/windows\sme/,windows2000:/windows\snt\s5\.0/,windowsxp:/windows\snt\s5\.1/,windows2003:/windows\snt\s5\.2/,windowsvista:/windows\snt\s6\.0/,windows7:/windows\snt\s6\.1/,windows8:/windows\snt\s6\.2/,"windows8.1":/windows\snt\s6\.3/,windows:/windows/,mac:/macintosh;[\w;\s]+mac\sos\sx\s((\d+[\._])+\d+)/,android:/android\s((\d+\.)+\d+)/,linux:/linux/,windowsphone:/windows\sphone\sos\s(\d+\.)+\d+/,ios_iphone:/i[Pp]hone\s?\d{0,};[\w;\s]+i[Pp]hone\s[Oo][Ss]\s((\d+_)+\d+)/,ios_ipod:/ipod;[\w;\s]+iphone\sos\s((\d+_)+\d+)/,ios_ipad:/ipad;[\w;\s]+os\s((\d+_)+\d+)/,ios:/ios;[\w;\s]+os\s((\d+_)+\d+)/,blackberry:/blackberry/,symbian:/symbianos\/(\d+\.\d+)/,webos:/hpwos\/((\d+\.)+\d+)/};for(var s in a){var r=e.ua.match(a[s]);if(r){e.os=s+(r.length>1?" "+r[1]:"");break}}var l=/android|iphone|ipad|ipod|phone|blackberry|mobile|symbianos/;e.ua.match(l)&&(e.ismobile=1)}(this)};browseInfo=new browserDect(window,navigator.userAgent.toString()),isMobile=1==browseInfo.ismobile,isSougou="sougou"==browseInfo.bname,isIE6="ie"==browseInfo.bname&&parseFloat(browseInfo.bversion)<7;var isOpenNewTab=isMobile,documentScrollTop=0;if(!document.getElementById("live800:link"))if(isIE6&&"undefined"==typeof live800_renderid)document.write("<a href='javascript:void(0);' id='live800:link' style='display:none;position:absolute;top:0px;left:0;width:0;height:0'>&#160;</a>");else{var live800link=document.createElement("a");live800link.setAttribute("href","javascript:void(0);"),live800link.setAttribute("id","live800:link"),live800link.setAttribute("style","display:none;position:absolute;top:0px;left:0;width:0;height:0"),live800link.innerHTML="&#160;",document.body.appendChild(live800link)}window.reloadClientConfig=function(){var e=cfg.invite;(cfg=loadConfig()).invite=e,cfg.invite.live800_invite_title="Invite"};var fn={get:function(e){return d.getElementById(e)},$tagName:function(e){return d.getElementsByTagName(e)},addClass:function(e,t){var i=new RegExp("(^|\\s)"+t+"(\\s|$)");if(!e.className.match(i))return e.className+=" "+t,e},removeClass:function(e,t){var i=new RegExp("(^|\\s)"+t+"(\\s|$)"),n=e.className;return n.match(i)&&(e.className=n.replace(i,"")),e},getServerPrefix:function(){this.vernier||(this.vernier=0);var e="";return this.vernier<cfg.servers.length?(e=cfg.servers[this.vernier],this.vernier++):(this.vernier=0,e=cfg.servers[0]),"https:"==location.protocol?e.replace(/http:/,"https:"):e},$class:function(e,t){for(var i=(t||d.body).getElementsByTagName("*"),n=i.length,o=[],a=0;a<n;a++)i[a].className.match(new RegExp("(^|\\s)"+e+"(\\s|$)"))&&o.push(i[a]);return o},unescapeHTML:function(e){var t=document.createElement("DIV");return t.innerHTML=e,t.innerText?t.innerText:t.textContent},escapeHTML:function(e){return e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")},domReady:function(e){if(fn.done)return e();fn.timer?fn.ready.push(e):(fn.addEvent(window,"load",fn.isDOMReady),fn.ready=[e],fn.timer=setInterval(function(){fn.isDOMReady()},50))},isDOMReady:function(){if(fn.done)return!1;if(d&&d.getElementsByTagName&&d.getElementById&&d.body){clearInterval(fn.timer),fn.timer=null;for(var e=0;e<fn.ready.length;e++)fn.ready[e]();fn.ready=null,fn.done=!0}},createNode:function(e,t,i){var n=d.createElement(e);for(var o in t)n.setAttribute(o,t[o]);return i&&(n.className=i),n},addEvent:function(e,t,i){e.attachEvent?e.attachEvent("on"+t,i):e.addEventListener(t,i,!1)},urlEncode:function(e){function t(e){return e.toString(16).toUpperCase()}if(null==e||""==e)return"";for(var i,n="",o=0,a=e.length;o<a;o++)(i=e.charCodeAt(o))<16?n+="%0"+i.toString(16).toUpperCase():i<128?n+=32==i?"+":i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122?e.charAt(o):"%"+t(i):i<2048?(n+="%"+t(192+(i>>6)),n+="%"+t(128+i%64)):(n+="%"+t(224+(i>>12)),n+="%"+t(128+(i>>6)%64),n+="%"+t(128+i%64));return n},urlDecode:function(e){if(null==e||""==e)return"";for(var t,i="",n=0,o=e.length;n<o;)"%"==e.charAt(n)?"e"==(t=e.charAt(n+1)).toLowerCase()?(i+=String.fromCharCode(4096*(parseInt("0x"+e.substr(n+1,2))-224)+64*(parseInt("0x"+e.substr(n+4,2))-128)+(parseInt("0x"+e.substr(n+7,2))-128)),n+=9):"c"==t.toLowerCase()||"d"==t.toLowerCase()?(i+=String.fromCharCode(64*(parseInt("0x"+e.substr(n+1,2))-192)+parseInt("0x"+e.substr(n+4,2))-128),n+=6):(i+=String.fromCharCode(parseInt("0x"+e.substr(n+1,2))),n+=3):(i+=e.charAt(n).replace(/\+/," "),n++);return i},urlToParams:function(e){for(cmdMap=new Array,cmdParams=new Array,pos=-1;;){if(newPos=e.indexOf("&",pos+1),newPos>=0?encodedProperty=e.substring(pos+1,newPos):encodedProperty=e.substring(pos+1,e.length),equalsPos=encodedProperty.indexOf("="),paramName=encodedProperty.substring(0,equalsPos),paramValue=encodedProperty.substring(equalsPos+1,encodedProperty.length),cmdParams[paramName]=paramValue,-1==newPos)break;pos=newPos}return cmdParams},paramsToUrl:function(e){var t="";for(var i in e)""!=e[i]&&"function"!=typeof e[i]&&(t=t+i+"="+encodeURIComponent(e[i])+"&");return t.substring(0,t.length-1)},isCookie:function(){d.cookie="testcookie=testvalue";return-1!=new String(d.cookie).indexOf("testcookie=testvalue")&&(fn.delCookie("testcookie"),!0)},delCookie:function(e){var t=new Date;t.setTime(t.getTime()-1);var i=fn.getCookie(e);null!=i&&(document.cookie=e+"="+i+";expires="+t.toGMTString())},setCookie:function(e,t,i){var n=new Date;i&&parseInt(i)>0?n.setTime(n.getTime()+1e3*i):n.setTime(n.getTime()+2592e6),document.cookie=e+"="+escape(t)+";expires = "+n.toGMTString()+";path=/"},setSessionCookie:function(e,t){document.cookie=e+"="+escape(t)+";path=/"},getCookie:function(e){var t,i=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=d.cookie.match(i))?unescape(t[2]):null},dragWindow:function(e,t,i){e&&(e.onmouseover=function(){e.style.cursor="move",window.ActiveXObject&&(e.onselectstart=function(){event.returnValue=!1},t.onselectstart=function(){event.returnValue=!1}),e.onmousedown=function(e){e=window.event||e,i&&(clearTimeout(i.floattimer),i.floattimer=null),t.className="drag",t.currentX=(e.pageX?e.pageX:e.clientX)-t.offsetLeft,t.currentY=(e.pageY?e.pageY:e.clientY)-t.offsetTop,d.onmousemove=function(e){e=window.event||e;try{"ie"==browseInfo.bname&&11!=parseInt(browseInfo.bversion)?(t.style.left=e.clientX-t.currentX+"px",t.style.top=e.clientY-t.currentY+"px"):e.pageX&&(t.style.left=e.pageX-t.currentX+"px",t.style.top=e.pageY-t.currentY+"px")}catch(i){}},d.onmouseup=function(){t.className="release",d.onmousemove=function(){},d.onmouseup=function(){}}}})},isBaidu:function(e){var t=/[a-zA-Z0-9\u4E00-\u9FA5][\-a-zA-Z0-9\u4E00-\u9FA5]{0,62}(\.[a-zA-Z0-9\u4E00-\u9FA5][\-a-zA-Z0-9\u4E00-\u9FA5]{0,62})+/gi,i=e.match(t);return!!(i&&i[0].indexOf(".baidu.")>0)},getBDParam:function(e,t){for(var i=null,n=0,o=t.length;n<o;n++){var a=e.indexOf(t[n]);if(a>0){var s=e.indexOf("&",a+1);s<0&&(s=e.length),i=[t[n],e.substring(a+t[n].length,s)];break}}return i},getBaiduWd:function(e){var t=["&wd=","&word=","&rqwd=","?wd=","?word=","?rqwd="];return fn.getBDParam(e,t)},getBDEqid:function(e){var t=["&eqid=","?eqid="];return fn.getBDParam(e,t)}},vis={startflag:!1,actions:[],justUrlLen:function(){var e=fn.urlEncode(d.URL),t=fn.getCookie("pageReferrInSession"),i=document.referrer;(null===t||""===t||t!=i&&fn.isBaidu(i))&&null!==(t=i)&&""!==t&&fn.setSessionCookie("pageReferrInSession",t);var n=fn.urlEncode(t),o=fn.getCookie("firstEnterUrlInSession");null!=o&&""!=o?o=fn.urlEncode(o):(o=fn.urlEncode(window.location),fn.setSessionCookie("firstEnterUrlInSession",window.location));var a;if(((a=d.title.length>80?fn.urlEncode(d.title.substring(0,80)):fn.urlEncode(d.title))+e+n).length>1600){if(a.length>198&&(a=a.substring(0,198)),e.length>=700&&(e=e.substring(0,700)),n.length>=700&&(n=n.substring(0,700),fn.isBaidu(t))){var s=fn.getBaiduWd(t),r=fn.getBDEqid(t);if(null!==s||null!==r){var l=fn.urlDecode(n);if(null!==s){var c=fn.getBaiduWd(l);null===c?l=l+s[0]+s[1]:s[1]!==c[1]&&(l=l.replace(s[0],s[0]+s[1]+"&"))}if(null!==r){var f=fn.getBDEqid(l);null===f?l=l+r[0]+r[1]:r[1]!==f[1]&&(l=l.replace(r[0],r[0]+r[1]+"&"))}fn.setSessionCookie("pageReferrInSession",l),n=fn.urlEncode(l)}}}vis.page={title:a,location:e,referrer:n,firstenterurl:o}},getParam:function(){var e="";if("65654"==cfg.companyId||"66181"==cfg.companyId){var t=window["lim:skills"];void 0!==t&&t.length>0&&(e=e+"&skillId="+t[0])}return e},getProtocol:function(){var t=document.scripts,i="http:";try{for(var n=0;n<t.length;n++)t[n].src.indexOf("monitor.js")>-1&&(i=t[n].src.split(":")[0]+":")}catch(e){}return i},close:function(){try{globalVisitHandle.pageChater.closePageChat()}catch(e){}},openWindow:function(t){var i=globalWindowAttribute||"toolbar=0,scrollbars=0,location=0,menubar=0,resizable=1,width=920,height=620,left="+(window.screen.width-920)/2+",top="+(window.screen.height-620)/2,n=vis.getCallUrl();if("undefined"!=typeof clientPreferenceLanguage&&(n+="&preferenceLanguage="+clientPreferenceLanguage),isOpenNewTab&&t&&t.nodeName&&1==t.nodeType)return t.setAttribute("href",n),!0;"undefined"!=typeof this.chatWindow&&null!=this.chatWindow||(this.chatWindow=navigateToUrl(n,"chatbox"+cfg.companyId,i));try{this.chatWindow.focus(),this.chatWindow.opener=window}catch(e){this.chatWindow=navigateToUrl(n,"chatbox"+cfg.companyId,i)}return!1},opendChat:function(e){return vis.close(),vis.customAction(),vis.openWindow(e)},customAction:function(){if("85742"==cfg.companyId)try{_gat._getTracker("UA-8318333-3")._trackEvent("Live800 Invite","CHAT")}catch(e){}},getCallUrl:function(){var e=cfg.jid,t=vis.getParam(),i=cfg.visitorInfo,n=cfg.enterurl,o=cfg.webAppUrl+"/chatClient/chatbox.jsp"+jsessionId+"?companyID="+cfg.companyId+(""!=cfg.invite.live800_bind_operator&&"undefined"!=typeof cfg.invite.live800_bind_operator?"&operatorId="+cfg.invite.live800_bind_operator:"")+(""!=cfg.invite.live800_bind_skill&&"undefined"!=typeof cfg.invite.live800_bind_skill?"&skillId="+cfg.invite.live800_bind_skill:"")+(""!=e?"&jid="+e:"")+(""!=t?"&"+t:"")+(i?"&"+i:"");return cfg.configId&&(o+="&configID="+cfg.configId),cfg.locale&&(o+="&lan="+cfg.locale),o+="&chatType=1&accept=1",(n||"null"==n)&&(n=fn.urlEncode(d.URL)),o+"&enterurl="+n},share:function(){if(!document.getElementById("lim:sharedObject")){var t="<div id='lim:sharedObject' style='position:absolute;z-index:-3;top:0;left:0;visibility:hidden'></div>";if(isIE6&&"undefined"==typeof live800_renderid)d.write(t);else{var i=document.createElement("div");document.body.appendChild(i),i.innerHTML=t}t="<iframe id='lim:share' name='lim:share' height='0' width='0' src='"+cfg.baseChatHtmlDir+"/shared.html?companyID="+cfg.companyId+"&configID="+cfg.configId+"'></iframe>";try{fn.get("lim:sharedObject").innerHTML=t,fn.addEvent(fn.get("lim:share"),"load",function(){vis.completed=!0})}catch(e){fn.addEvent(window,"load",function(){fn.get("lim:sharedObject").innerHTML=t,fn.addEvent(fn.get("lim:share"),"load",function(){vis.completed=!0})})}}},init:function(){cfg.invite=fn.urlToParams(cfg.configContent),"undefined"!=typeof autoInitialChat&&(cfg.autoInitialChat=fn.urlToParams(autoInitialChat)),"1"==cfg.invite.initiated_chat_compatibility&&(vis.compatibility=!0),vis.share();try{-[1]||"BODY"!=fn.get("lim:sharedObject").parentNode.tagName?vis.isNeedLazy=!0:vis.isNeedLazy=!1}catch(e){vis.isNeedLazy=!0}},monitor:function(){globalSendDriver=new SendDriver,globalReceiveDriver=new ReceiveDriver,globalVisitClient=new VisitClient,globalVisitServer=new VisitServer,globalVisitHandle=new VisitHandle,"undefined"!=typeof mobile_icons_cfg&&browseInfo.ismobile&&(globalMobileIcon=new MobileIcon),globalVisitClient.start()},getSkin:function(){var e=cfg.invite.live800_invite_top,t=cfg.invite.live800_invite_style,i={id:"invite_style",type:"text/css",rel:"stylesheet",href:fn.getServerPrefix()+"/chatClient/invite/theme/0/invite.css"+(isSSLReq?"?ss=1":"")};if(void 0===t&&(t=cfg.invite.live800_invite_style=0),0==e||1==e)i.href=fn.getServerPrefix()+"/chatClient/invite/theme/"+t+"/invite.css"+(isSSLReq?"?ss=1":"");else if(2==e){var n=fn.urlToParams(cfg.customContent);if(n.interface_type){var o=n.interface_type;0==o||2==o?i.href=fn.getServerPrefix()+"/chatClient/invite/simple.css"+(isSSLReq?"?ss=1":""):1==o&&(i.href=n.link)}}return fn.createNode("link",i)},loadChatSkin:function(e){var t={id:"mini_chat_style",type:"text/css",rel:"stylesheet"};return"5"!=live800_chatVersion?t.href=fn.getServerPrefix()+"/chatClient/invite/theme/"+e+"/mini.css"+(isSSLReq?"?ss=1":""):t.href=fn.getServerPrefix()+"/chatClient/version5/style/theme/userColor/mini.css"+(isSSLReq?"?ss=1":""),fn.createNode("link",t)},loadSkin:function(){if(fn.get("invite_style")||fn.$tagName("head")[0].appendChild(vis.getSkin()),!("5"!=live800_chatVersion||isMobile||fn.get("mini_chat_style")||"undefined"!=typeof onlyShowInvite&&0!=onlyShowInvite))var e=setInterval(function(){function t(){var e,t={},i=fn.get("lim_mini"),n=fn.get("lim_mini_chat"),o=parseInt(null==cfg.invite.sideSpace?"50":cfg.invite.sideSpace);e="backcompat"==document.compatMode.toLowerCase()?document.body:document.documentElement,t.top=parseInt(e.scrollTop),t.top+=parseInt(e.clientHeight),t.left=parseInt(e.scrollLeft||0),i.style.top=t.top-34+"px",n.style.top=t.top-390+"px","left"==cfg.invite.posSide?(t.left+=o,i.style.left=t.left+"px",n.style.left=t.left+"px"):(t.left+=e.clientWidth,t.left-=o,i.style.left=t.left-150+"px",n.style.left=t.left-320+"px")}if(fn.get("lim_mini")&&fn.get("lim_mini_chat")){clearInterval(e);var i=fn.get("lim_mini").style,n=fn.get("lim_mini_chat").style,o=null==cfg.invite.sideSpace?"50px":cfg.invite.sideSpace+"px";"left"==cfg.invite.posSide?(i.left=o,n.left=o):(i.right=o,n.right=o),null!=cfg.invite.windowLength&&(n.height=cfg.invite.windowLength+"px",n.width=cfg.invite.windowWidth+"px"),i.backgroundColor=live800_chatSkinColor,fn.$tagName("head")[0].appendChild(vis.loadChatSkin()),"1"==cfg.invite.pageChatVisible?i.display="block":i.display="none","0"==cfg.status?fn.$class("bg_wrap",fn.get("lim_mini"))[0].innerHTML=innerpage_leavemessage:fn.$class("bg_wrap",fn.get("lim_mini"))[0].innerHTML=innerpage_chat,fn.addEvent(fn.get("lim_mini"),"click",function(){globalVisitHandle.openInitiatedChat(!1),clearTimeout(globalVisitHandle.delayTimer);var e=document.getElementById("live800_msg_box");e&&e.parentNode&&e.parentNode.removeChild(e)}),"ie"!=browseInfo.bname||!isIE6&&"backcompat"!=document.compatMode.toLowerCase()||(fn.addEvent(window,"resize",t),fn.addEvent(window,"scroll",t),t())}},50)},listen:function(){setInterval(function(){window.LIM&&LIM.completed&&("1"!=fn.getCookie("forInitial")||globalVisitClient.pageChating||globalVisitClient.initiChating||(globalVisitClient.initiChating=!0,vis.actions.push(function(){globalVisitHandle.pageChater.openPageChat(!1)})),vis.actions.length>0&&(vis.actions[0](),vis.actions.shift()))},200)},lazyCreator:function(){try{if(parent&&"1"==parent.document.body.getAttribute("lim:initchat"))return}catch(e){}d.body&&"1"==d.body.getAttribute("lim:initchat")||new JSONRequest(fn.getServerPrefix()+"/chatClient/script/component-v5.js","lim:component",function(){vis.loadSkin(),"undefined"!=typeof onlyShowInvite&&0!=onlyShowInvite||vis.listen()})},writeHtml:function(){var e="https:"==document.location.protocol?"https://"+live800_baseUrl+live800_baseWebApp+live800_baseChatHtmlDir+"/spacer.gif":"about:blank";if(window.LIM||(window.LIM={}),!d.getElementById("InviteWindow")){var t='<div id="InviteWindow" style="z-index:2147480000;visibility:hidden;opacity:0;display:none;filter:alpha(opacity=0);"></div>';if("78439"!=live800_companyID?t+='<div id="lim_mini_chat" style="display:none;"><div style="position:relative"></div></div>':t+='<div id="lim_mini_chat" style="display:none;"><div></div></div>',t+='<div id="lim_mini" style="display:none;"><div id=\'lim_mini_word\'><div class="bg_wrap"></div><div id="lim_restore"></div></div><div id=\'lim_mini_icon\'><div id=\'lim_minicon\'></div><div id=\'lim_backdrop\'></div><iframe src="'+e+'" id="lim_mini_effects" name="lim_mini_effects" scrolling="no" border="0" frameborder="0" allowtransparency="true"></iframe></div></div>',t+='<iframe src="'+e+'" id="lim_frame" style="display:none" height="0" width="0"></iframe>',isIE6&&"undefined"==typeof live800_renderid)d.write(t);else{var i=document.createElement("div");i.innerHTML=t,document.body.appendChild(i)}LIM.completed=!0,vis.loadSkin(),vis.listen(),"undefined"!=typeof globalInviteWindow?globalInviteWindow.init():(globalInviteWindow=new InviteWindow,globalInviteWindow.init());var n=fn.get("lim_mini_effects").contentWindow.document;n.open(),n.write("<span></span>"),n.close(),n.body.style.backgroundColor="transparent",globalVisitClient.pageChating=!1}},start:function(){vis.startflag||(vis.startflag=!0,vis.init(),"undefined"!=typeof onlyShowInvite&&0!=onlyShowInvite||(vis.monitor(),setTimeout("globalSendDriver.startFlowCapacity()",5e3)),"undefined"!=typeof mobile_icons_cfg&&browseInfo.ismobile||(globalInviteWindow=new InviteWindow),vis.isNeedLazy?vis.lazyCreator():vis.writeHtml())},initChatInIframe:function(t,i){function n(){var e;return"undefined"!=typeof window.pageYOffset?e=window.pageYOffset:s.isStrict?e=document.documentElement.scrollTop:"undefined"!=typeof document.body&&(e=document.body.scrollTop),e}function o(){return s.isStrict?document.documentElement.clientHeight:"undefined"!=typeof window.innerHeight?window.innerHeight:document.body.clientHeight}function a(e,t){window.init_title||(window.init_title=""),init_title='"'+init_title+'"';var i=isMobile?"auto":"no",a="<div class='mini_wrap' title="+init_title+'></div><div class="title"></div><div class="minimize"></div><div class="maximize"></div><div class=""></div><div class="close"></div><div style="display:none;" id="opCloseChatDiv" class="opCloseChatDiv"></div><iframe id="chat_iframe" name="chat_iframe" src="'+t+"&tm="+(new Date).getTime()+'" scrolling="'+i+'" border="1" allowtransparency="true" frameborder="0" ondragstart="return false" onselectstart ="return false" onselect="if(document.selection)document.selection.empty()" oncopy="document.selection.empty()" onbeforecopy="return false"></iframe>',r=fn.get("lim_mini_chat");r.getElementsByTagName("div")[0].innerHTML=a;var l=document.getElementById("lim_mini");if(s.isIE6||(s.isIE7||s.isIE8||s.isIE9||s.isIE10)&&!s.isStrict){var c=n()+o();r.style.top=c-390+"px",l.style.display="block",l.style.top=c-l.offsetHeight+"px",l.style.display="none"}}var s=function(){var e=navigator.userAgent.toLowerCase(),t=function(t){return t.test(e)};return{isStrict:"CSS1Compat"==document.compatMode,isOpera:t(/opera/),isChrome:t(/chrome/),isWebKit:t(/webkit/),isIE6:document.all&&!!/MSIE (\d)\.0/i.exec(navigator.userAgent)&&6==[/MSIE (\d)\.0/i.exec(navigator.userAgent)][0][1],isIE7:t(/msie 7/),isIE8:t(/msie 8/),isIE9:t(/msie 9/),isIE10:t(/msie 10/),isSecure:/^https/i.test(window.location.protocol)}}();!function(i){try{!function(e){var i=vis.initValue;"undefined"!=typeof globalInviteWindow&&globalInviteWindow.setVisiblity(!1),"init"==i&&(vis.initValue="",e.body.setAttribute("lim:initchat","1"),a(e,t))}(i)}catch(e){}}(document)}},cfg=loadConfig(),openOldInitiatedChatWindow=function(t){var i=t+"&chatstatus=DELAY";try{navigateToUrl(i+"&t"+(new Date).getTime(),"chatbox"+cfg.companyId,"toolbar=0,scrollbars=0,location=0,statusbar=0,menubar=0,resizable=0,width=570,height=424").focus()}catch(e){i+="&block=0&t="+(new Date).getTime(),window.location=i}},openInCurrentWindow=function(e){var t=e+"&chatstatus=DELAY&block=0&t="+(new Date).getTime();window.location=t},specials={67919:openOldInitiatedChatWindow,81284:openOldInitiatedChatWindow,77081:openOldInitiatedChatWindow,68771:openOldInitiatedChatWindow,70746:openOldInitiatedChatWindow,78994:openOldInitiatedChatWindow,70746:openOldInitiatedChatWindow,111375:openOldInitiatedChatWindow,131117:openOldInitiatedChatWindow};JSONRequest.prototype={init:function(e,t){this.script=document.createElement("script"),this.script.setAttribute("type","text/javascript");var i=this;if(t?(this.script.setAttribute("id",t),fn.$tagName("head")[0].appendChild(this.script)):fn.$tagName("head")[0].appendChild(this.script),this.script)if(document.all){var n=this.script;this.script.onreadystatechange=function(){var e=n.readyState;"loaded"!=e&&"interactive"!=e&&"complete"!=e||(i&&i.onload&&i.onload.call(i),i=null)}}else this.script.onload=function(){i&&i.onload&&i.onload.call(i),i=null};else i.onerror.call(this),i=null;this.script.setAttribute("src",e)},defaultError:function(){alert("create script node fail!")}},SendDriver.prototype={onRpcSuccess:function(e,t){null!=this.rpcMethod.onSuccess&&this.rpcMethod.onSuccess(e,t),this.busy=!1},onRpcError:function(){this.rpcMethod.retryTimes<=0?(null!=this.rpcMethod.onError&&this.rpcMethod.onError(this.rpcMethod),this.busy=!1):(this.rpcMethod.retryTimes--,this.execute(this.rpcMethod))},startFlowCapacity:function(){if(fn.isCookie()&&"1"!=document.body.getAttribute("lim:VisitorCapacity")){document.body.setAttribute("lim:VisitorCapacity","1");var e=fn.getCookie("VisitorCapacity");if(null==e||""==e){var t=[];t[0]="companyID="+cfg.companyId;var i=new RpcMethod("SurferServer","115",t,0,function(){fn.setSessionCookie("VisitorCapacity","1")},null);globalSendDriver.execute(i)}}},execute:function(e){this.busy=!0,this.rpcMethod=e;var t=cfg.webAppUrl+"/"+this.rpcMethod.serviceName+jsessionId+"?cmd="+this.rpcMethod.cmdNo+"&visitorIDInSession="+cfg.visitorIDInSession+cfg.visitorInfo;if(cfg.locale&&(t+="&lan="+cfg.locale),null!=this.rpcMethod.params)for(i in this.rpcMethod.params)"string"==typeof i&&"string"==typeof this.rpcMethod.params[i]&&(pos=this.rpcMethod.params[i].indexOf("="),paramName=this.rpcMethod.params[i].substring(0,pos),paramValue=this.rpcMethod.params[i].substring(pos+1),t+="&"+paramName+"="+fn.urlEncode(paramValue));t+="&rpcImageId="+(new Date).getTime();var n=this;this.rpcImage=new Image,this.rpcImage.onload=function(){n.onRpcSuccess(this.offsetWidth,this.offsetHeight)},this.rpcImage.onerror=function(){n.onRpcError()},this.rpcImage.src=t}},ReceiveDriver.prototype={initTags:function(){this.tags[1]=["0000"],this.tags[2]=["6040"],this.tags[3]=["6021"],this.tags[4]=["6020"],this.tags[5]=["6031"],this.tags[8]=["0001"],this.tags[9]=["0002"],this.tags[10]=["0003"]},getTag:function(){var t;try{if("END"==globalReceiveDriver.receiveStatus)return;vis.justUrlLen(),this.tagImage=new Image;var i=this.tagImage,n=this;if(this.loadingTag=!0,this.tagImage.onload=function(){clearTimeout(t),n.onTagSuccess(this.width)},this.tagImage.onerror=this.tagImage.onabort=function(){clearTimeout(t),n.onTagError(i)},this.firstTagSuccess){var o=this.tagUrl;"undefined"==typeof globalInviteWindow||globalInviteWindow.inviteHandled||(o+="&beInvited=1"),o+="&isblock=0",o=(o+="&act=0")+"&rpcImageId="+(new Date).getTime(),t=setTimeout("globalReceiveDriver.onTagOverTime()",5e3),this.tagImage.src=o}else this.tagImage.src=this.firstTagUrl+"&t="+(new Date).getTime()}catch(e){clearTimeout(t),globalReceiveDriver.exceptiontime++,globalReceiveDriver.exceptiontime>100?globalReceiveDriver.stop():globalReceiveDriver.restart()}},onTagOverTime:function(){this.tagImage.src="",globalReceiveDriver.restart()},onTagSuccess:function(e){var t=this.tags[e];if(null!=t){for(i in t)if("string"==typeof t[i]&&"string"==typeof t[i])if("0003"!=t[i]&&(this.firstTagSuccess=!0),"0000"==t[i])this.loadContent();else if("0001"==t[i])clearInterval(globalReceiveDriver.receiveTimer),this.reConnectionToServer(),this.receiveTimer=setTimeout("globalReceiveDriver.start()",monitorInterval);else if("0002"==t[i])clearInterval(globalReceiveDriver.receiveTimer),globalReceiveDriver.start();else{this.reconnFlag=!1;var n=t[i].substring(0,3),o=t[i].substring(3),a=[];a.tp=n,a.content=o;for(j in this.receiveDriverListeners)"function"!=typeof this.receiveDriverListeners[j]&&this.receiveDriverListeners[j].receiveDriverReceived&&this.receiveDriverListeners[j].receiveDriverReceived(a)}this.loadingTag=!1}else this.firstTagSuccess=!0},reConnectionToServer:function(){if(!this.reconnFlag)if(this.reconnFlag=!0,this.reconntime>100)clearInterval(globalReceiveDriver.receiveTimer);else{this.reconntime++,this.tagImage=new Image;this.tagImage;this.tagImage.onload=function(){globalReceiveDriver.tryToRestartSurfer(this.csd,1)};var e=this.tagUrl;"undefined"==typeof globalInviteWindow||globalInviteWindow.inviteHandled||(e+="&beInvited=1"),e=(e+="&reqreconnection=1")+"&rpcImageId="+(new Date).getTime(),this.tagImage.src=e}},tryToRestartSurfer:function(e,t){this.tagImage=new Image;this.tagImage;this.tagImage.onload=function(){globalReceiveDriver.onTagSuccess(this.width)};var i=this.tagUrl;"undefined"==typeof globalInviteWindow||globalInviteWindow.inviteHandled||(i+="&beInvited=1"),i+="&csd="+e,i=(i+="&token="+t)+"&rpcImageId="+(new Date).getTime(),this.tagImage.src=i},onTagError:function(){this.firstTagSuccess=!0},sendMessage:function(e){},start:function(){vis.justUrlLen();var e="undefined"==typeof browseInfo?"":"&mb="+browseInfo.ismobile+"&bn="+browseInfo.bname+"&bv="+encodeURIComponent(browseInfo.bversion)+"&sr="+browseInfo.width+"x"+browseInfo.height+"&os="+browseInfo.os,t=this.tagUrl,i=this;t+="&isblock=0",t+="&act=0",t+="&pagetitle="+vis.page.title,t+="&pagelocation="+vis.page.location,t+="&pagereferrer="+vis.page.referrer,t=(t+="&firstEnterUrl="+vis.page.firstenterurl)+e+"&rpcImageId="+(new Date).getTime(),this.tagImage.src=this.firstTagUrl=t,this.tagImage.onload=function(){i.onTagSuccess(this.width)},this.tagImage.onerror=this.tagImage.onabort=function(){i.onTagError()},this.reconnFlag=!1,this.receiveTimer=setInterval("globalReceiveDriver.getTag()",monitorInterval)},restart:function(){"END"!=globalReceiveDriver.receiveStatus&&(this.getTag(),clearInterval(globalReceiveDriver.receiveTimer),this.receiveTimer=setInterval("globalReceiveDriver.getTag()",monitorInterval))},stop:function(){clearInterval(this.receiveTimer),globalReceiveDriver.receiveStatus="END"},addReceiveDriverListener:function(e){null!=e&&(this.receiveDriverListeners[this.receiveDriverListeners.length]=e)}},VisitServer.prototype={refuseInvite:function(){var e=[];e[0]="companyID="+cfg.companyId,e[1]="accept=0";var t=new RpcMethod("SurferServer","102",e,0,null,null);globalSendDriver.execute(t)},acceptInvite:function(){var e=[];e[0]="companyID="+cfg.companyId,e[1]="accept=1";var t=new RpcMethod("SurferServer","102",e,0,null,null);globalSendDriver.execute(t)},initiateChat:function(){var e=[];e[0]="companyID="+cfg.companyId;var t=new RpcMethod("SurferServer","109",e,0,null,null);globalSendDriver.execute(t)},getAcceptInviteUrl:function(){var e=cfg.webAppUrl+"/SurferServer"+jsessionId+"?cmd=102";e+="&accept=1",e+="&visitorIDInSession="+cfg.visitorIDInSession,e+="&companyID="+cfg.companyId;var t=cfg.jid,i=cfg.visitorInfo;return cfg.configId&&""!=cfg.configId&&(e+="&configID="+cfg.configId),cfg.locale&&""!=cfg.locale&&(e+="&lan="+cfg.locale),(e+=cfg.enterurl?"&enterurl="+cfg.enterurl:"")+(""!=t?"&jid="+t:"")+(""!=i?"&"+i:"")},getInitiatedChatUrl:function(){var e={jid:cfg.jid,skillId:cfg.insidePageSkillId,enterurl:fn.urlDecode(cfg.enterurl)},t=cfg.webAppUrl+"/chatClient/chatbox.jsp"+jsessionId+"?companyID="+cfg.companyId+"&chatType=2";cfg.configId&&(t+="&configID="+cfg.configId),cfg.locale&&(t+="&lan="+cfg.locale);"undefined"!=typeof operator&&operator.id,"undefined"!=typeof skill&&skill.id;return t+"&"+fn.paramsToUrl(e)+(""!=cfg.visitorInfo?"&"+cfg.visitorInfo:"")+(isSSLReq?"&s=1":"")},getCallUrl:function(){var e=cfg.jid,t=vis.getParam(),i=cfg.visitorInfo,n=(cfg.enterurl,cfg.webAppUrl+"/chatClient/chatbox.jsp"+jsessionId+"?companyID="+cfg.companyId+(""!=e?"&jid="+e:"")+(""!=t?"&"+t:"")+(i?"&"+i:""));return cfg.configId&&(n+="&configID="+cfg.configId),n+(cfg.enterurl?"&enterurl="+cfg.enterurl:"")},start:function(){},stop:function(){clearTimeout(this.visitServerTimer)}},VisitClient.prototype={receiveDriverReceived:function(e){var t=e,i=t.tp;if(null!=i)switch(i){case"602":if("1"==t.content)for(j in this.messageListeners)this.messageListeners[j].showInvite&&this.messageListeners[j].showInvite();else for(j in this.messageListeners)this.messageListeners[j].hideInvite&&this.messageListeners[j].hideInvite();break;case"603":for(j in this.messageListeners)this.messageListeners[j].openInitiatedChat&&this.messageListeners[j].openInitiatedChat();break;case"604":for(j in this.messageListeners)this.messageListeners[j].reloadIcon&&this.messageListeners[j].reloadIcon();break;case"608":for(j in this.messageListeners)this.messageListeners[j].setConfig&&this.messageListeners[j].setConfig(t)}},refuseInvite:function(){globalVisitServer.refuseInvite()},acceptInvite:function(){globalVisitServer.acceptInvite()},initiatedChat:function(){globalVisitServer.initiatedChat()},getAcceptInviteUrl:function(){return globalVisitServer.getAcceptInviteUrl()},getInitiatedChatUrl:function(){return globalVisitServer.getInitiatedChatUrl()},getCallUrl:function(){return globalVisitServer.getCallUrl()},start:function(){globalReceiveDriver.start(),globalVisitServer.start()},stop:function(){globalReceiveDriver.stop(),globalVisitServer.stop()},addMessageListener:function(e){null!=e&&(this.messageListeners[this.messageListeners.length]=e)}},VisitHandle.prototype={showInvite:function(){vis.actions.push(function(){"undefined"!=typeof globalInviteWindow&&(globalInviteWindow.operatorInvite=!1,window.focus(),globalInviteWindow.isauto=!1,globalInviteWindow.inviteHandled=!1,globalInviteWindow.operatorInvite=!0,globalInviteWindow.show())})},hideInvite:function(){"undefined"!=typeof globalInviteWindow&&globalInviteWindow.hide()},openInitiatedChat:function(e){var t=!1!==e;t&&(globalVisitClient.initiChating=!0,fn.setCookie("forInitial","1",2));var i=this;vis.actions.push(function(){i.initiatedChatAction(t)})},initiatedChatAction:function(e){this.pageChater.openPageChat(e)},getInviteStyle:function(){var e=parseInt(cfg.invite.live800_invite_style);return isNaN(e)?cfg.invite.live800_invite_style:e>18?(cfg.invite.live800_invite_style="0","0"):cfg.invite.live800_invite_style},reloadIcon:function(){var e=d.getElementsByName("live800icon");if(null!=e)for(i=0;i<e.length;i++)temp=e[i].src,temp+="&rpcImageId="+(new Date).getTime(),e[i].src=temp},onInviteWindowAccept:function(t){globalInviteWindow.inviteHandled=!0;var i=globalVisitClient.getAcceptInviteUrl(),n=globalWindowAttribute;if(isOpenNewTab&&t&&t.nodeName&&1==t.nodeType)return t.setAttribute("href",i),!0;try{navigateToUrl(i,"chatbox"+cfg.companyId,n).focus()}catch(e){}return!1},onInviteWindowRefuse:function(){globalInviteWindow.inviteHandled=!0,globalVisitClient.refuseInvite()},onIconClick:function(){var t=globalVisitClient.getCallUrl(),i=globalWindowAttribute;"undefined"!=typeof this.chatWindow&&null!=this.chatWindow||(this.chatWindow=navigateToUrl(t,"chatbox"+cfg.companyId,i));try{this.chatWindow.focus(),this.chatWindow.opener=window}catch(e){this.chatWindow=navigateToUrl(t,"chatbox"+cfg.companyId,i)}return!1},autoInitialChat:function(){if(cfg.autoInitialChat&&"1"==cfg.autoInitialChat.autoChat&&("undefined"==typeof autoChat||1!=autoChat)){var e=this;this.delayTimer=setTimeout(function(){e.pageChater.start(!1,"4")},1e3*cfg.autoInitialChat.delayTime)}},initListener:function(){globalVisitClient.addMessageListener(this)}},InviteWindow.prototype={init:function(){function e(){if(!globalInviteWindow.inviteHandled){var e=cfg.webAppUrl+"/SurferServer"+jsessionId+"?cmd=102&companyID="+cfg.companyId+"&accept=0&visitorIDInSession="+cfg.visitorIDInSession+cfg.visitorInfo+"&rpcImageId="+(new Date).getTime();cfg.locale&&(e+="&lan="+cfg.locale),(new Image).src=e,globalInviteWindow.inviteHandled=!0}}d.body?this.floatLeft=(d.body.clientWidth-250)/2:this.floatLeft=(innerWidth-450)/2,this.loaded=!0,this.parent=null,this.isLock=cfg.invite.live800_invite_fixed_pos,this.canFixed=!(isIE6||"ie"==browseInfo.bname&&"BackCompat"==document.compatMode);var t=this;if(setTimeout(function(){t.generate()},500),(1==cfg.invite.live800_invite_auto||2==cfg.invite.live800_invite_auto)&&"1"==cfg.status){var i=fn.getCookie("hasVisited");if("1"==cfg.invite.live800_invite_repeat_type&&(globalInviteWindow.inviteCount=parseInt(fn.getCookie("visitorInviteCount"))||0),globalInviteWindow.inviteCount>=parseInt(cfg.invite.live800_invite_repeat_number)-1)return!1;1==cfg.invite.live800_invite_auto?setTimeout("globalInviteWindow.show()",1e3*cfg.invite.live800_invite_delay):i||setTimeout("globalInviteWindow.show()",1e3*cfg.invite.live800_invite_delay),this.isauto=!0}fn.addEvent(window,"unload",e),fn.addEvent(window,"beforeunload",e)},generate:function(){var e=cfg.invite.live800_invite_top,t={inviteTitle:fn.unescapeHTML(fn.urlDecode(cfg.invite.live800_invite_title)),inviteText:this.getInviteContent(),inviteWelcome:cfg.visitorAddr,inviteWord:cfg.inviteContent,accept:cfg.accept,cancel:cfg.cancel};if("0"==cfg.invite.live800_welcome_switch&&(t.inviteWelcome=""),"default"!=cfg.invite.live800_invite_style){if(this.inviteInnerHtml=Theme.generatorDefault(t),1==e){var i=cfg.invite.live800_invite_style?cfg.invite.live800_invite_style:0;return t.swfUrl=fn.getServerPrefix()+"/chatClient/invite/theme/"+i+"/images/invite.swf",this.inviteInnerHtml=Theme.generatorFlash(t),void(fn.get("InviteWindow").innerHTML=this.inviteInnerHtml)}if(2==e){var n=fn.urlToParams(cfg.customContent);return t.type=n.interface_type,this.inviteInnerHtml=Theme.generatorCustom(t,n),fn.get("InviteWindow").innerHTML=this.inviteInnerHtml,n.height&&(fn.get("InviteWindow").style.height=n.height+"px"),void(n.width&&(fn.get("InviteWindow").style.width=n.width+"px"))}fn.get("InviteWindow").innerHTML=Theme.generatorDefault(t)}else Theme.processDefaultValue(t)},showTimer:function(){try{var config=cfg;if(this.loaded&&this.showInvite){var top,left;document.all?(scrollPosY=0,scrollPosX=0,eval('try {if (typeof(document.documentElement) != "undefined") {scrollPosY = document.documentElement.scrollTop;scrollPosX = document.documentElement.scrollLeft;}} catch (e) {}'),scrollPosY=Math.max(d.body.scrollTop,scrollPosY),scrollPosX=Math.max(d.body.scrollLeft,scrollPosX),top=scrollPosY,left=scrollPosX,this.lastTop<0||this.lastTop==top&&this.lastLeft==left?this.setVisiblity(!0):this.setVisiblity(!1)):(scrollPosY=0,scrollPosX=0,eval('try {if (typeof(document.documentElement) != "undefined") {scrollPosY = document.documentElement.scrollTop;scrollPosX = document.documentElement.scrollLeft;}} catch (e) {}'),scrollPosY=Math.max(d.body.scrollTop,scrollPosY),scrollPosX=Math.max(d.body.scrollLeft,scrollPosX),top=pageYOffset,left=pageXOffset,this.lastTop<0||this.lastTop==top&&this.lastLeft==left?this.setVisiblity(!0):this.setVisiblity(!1)),this.lastTop=top,this.lastLeft=left}globalInviteWindow.floattimer=setTimeout("globalInviteWindow.showTimer()",250)}catch(e){globalInviteWindow.floattimer=setTimeout("globalInviteWindow.showTimer()",250)}},scrollPlace:function(){var e,t;e=this.floatTop,t=d.body?d.body.clientWidth>d.documentElement.clientWidth?d.body.clientWidth:d.documentElement.clientWidth-250-this.floatLeft:innerWidth-250-this.floatLeft;var i=fn.get("InviteWindow").style;i.left=pageXOffset+t+"px",i.top=pageYOffset+e+"px"},show:function(){"undefined"!=typeof globalVisitClient&&globalVisitClient.pageChating||"true"==fn.getCookie("hasVisited")&&2==cfg.invite.live800_invite_auto&&this.isauto||(2==cfg.invite.live800_invite_auto&&fn.setCookie("hasVisited","true"),this.showInvite=!0,fn.get("InviteWindow").style.display="block","1"==this.isLock&&this.canFixed?(fn.get("InviteWindow").style.position="fixed",this.resizeInvite(!0),fn.addEvent(window,"resize",function(){globalInviteWindow.floattimer&&globalInviteWindow.resizeInvite(!0)})):(globalInviteWindow.showTimer(),this.resizeInvite(!1)),globalInviteWindow.setVisiblity(!0),fn.dragWindow(fn.get("InviteWindow"),fn.get("InviteWindow"),globalInviteWindow),"293098"!=cfg.companyId&&"11150"!=cfg.companyId||top.focus(),function(){if(function(e){if(e.indexOf("MSIE")>0){var t=/msie([^;]+);/i,i=e.match(t);if(parseFloat(i[1])<=6)return!0}return!1}(navigator.userAgent))for(var e=document.styleSheets,t=0;t<e.length;t++)if("invite_style"==e[t].id){!function(e){for(var t,i,n=e.rules,o=0;o<n.length;o++)(t=n[o]).selectorText&&void 0!==(i=t.style.filter)&&(t.style.filter=i.replace("http://test.live800.com/test1","http://"+cfg.baseWebApp),t.style.filter)}(e[t]);break}}())},hide:function(e){window.toChat||(window.toChat=e||!1),this.showInvite=!1,this.setVisiblity(!1),this.isauto||globalVisitHandle.onInviteWindowRefuse(),window.toChat||"1"!=cfg.invite.live800_invite_repeat||"1"!=cfg.invite.live800_invite_auto||(globalInviteWindow.inviteCount=globalInviteWindow.inviteCount||0,"1"==cfg.invite.live800_invite_repeat_type&&(globalInviteWindow.inviteCount=parseInt(fn.getCookie("visitorInviteCount"))||0),globalInviteWindow.inviteCount<parseInt(cfg.invite.live800_invite_repeat_number)-1&&(globalInviteWindow.inviteCount++,fn.setCookie("visitorInviteCount",globalInviteWindow.inviteCount),setTimeout(function(){globalInviteWindow.show()},1e3*cfg.invite.live800_invite_repeat_time)))},accept:function(e){return this.showInvite=!1,globalInviteWindow.setVisiblity(!1),this.isauto?vis.opendChat(e):globalVisitHandle.onInviteWindowAccept(e)},refuse:function(){this.hide()},setInviteText:function(e){fn.get("invitetext").innerHTML=e},setConfig:function(e){this.inviteText=e.invitecontent,this.setInviteText(this.inviteText)},getInviteContent:function(){var e="";if("0"==cfg.invite.live800_welcome_switch)return"<p>"+fn.urlDecode(fn.unescapeHTML(cfg.inviteContent))+"</p>";var t=cfg.visitorAddr;return t?(t&&"null"!=t&&0!=t.length&&(e=e+fn.urlDecode(fn.unescapeHTML(t))+"<p>"+fn.urlDecode(fn.unescapeHTML(cfg.inviteContent))+"</p>"),e):e},resizeInvite:function(e){var t,i="CSS1Compat"==d.compatMode,n={},o=fn.get("InviteWindow");i?(t=d.documentElement,n.scrollTop=Math.max(d.body.scrollTop,t.scrollTop),n.scrollLeft=Math.max(d.body.scrollLeft,t.scrollLeft)):(t=d.body,n.scrollTop=t.scrollTop,n.scrollLeft=t.scrollLeft),e&&(n.scrollTop=0,n.scrollLeft=0),o.style.top=n.scrollTop+((t.clientHeight||window.innerHeight)-o.offsetHeight)/2+"px",o.style.left=n.scrollLeft+((t.clientWidth||window.innerWidth)-o.offsetWidth)/2+"px"},setVisiblity:function(e){var t=fn.get("InviteWindow"),i=t?t.style:null,n=e?"visible":"hidden",o=e?1:0;i&&(i.visibility=n,i.opacity&&(i.opacity=o),i.filter="alpha(opacity="+100*o+")")}};var Theme={};Theme.generatorDefault=function(e){return'<div id="invite_bg"></div><div id="invite_title">'+fn.unescapeHTML(fn.urlDecode(e.inviteTitle))+'</div><div id="invite_text">'+e.inviteText+"</div><div id=\"invite_btn\"><a target='_blank' href='javascript:void(0);' style='text-decoration:none'  onclick=\"return globalInviteWindow.accept(this);\"><button class=\"accept\" ><span>"+fn.urlDecode(e.accept)+"</span></button></a><a href='javascript:void(0);' style='text-decoration:none'><button class=\"cancel\" onclick=\"globalInviteWindow.refuse();return false;\"><span>"+fn.urlDecode(e.cancel)+"</span></button></a></div>"},Theme.generatorFlash=function(e){var t=fn.unescapeHTML(fn.urlDecode(e.inviteWelcome)),i="title="+fn.unescapeHTML(fn.urlDecode(e.inviteTitle))+"&content="+fn.unescapeHTML(fn.urlDecode(e.inviteWord))+"&welcome="+(void 0===t?"":t)+"&accept="+fn.unescapeHTML(fn.urlDecode(e.accept))+"&cancel="+fn.unescapeHTML(fn.urlDecode(e.cancel)),n="https:"==document.location.protocol?"https://":"http://";return/opaque=1/i.test(e.swfUrl)?'<object id="inviteFlash" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+n+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="100%" height="100%"><param name="movie" value="'+e.swfUrl+'" /><param name="quality" value="high" /><param name="FlashVars" value="'+fn.escapeHTML(i)+'" /><param name="allowScriptAccess" value="always" /><embed src="'+e.swfUrl+'" quality="high" width="100%" height="100%" name="movie" allowScriptAccess="always" FlashVars="'+i+'" type="application/x-shockwave-flash" pluginspage="'+n+'www.adobe.com/go/getflashplayer" /></object>':'<object id="inviteFlash" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+n+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="100%" height="100%"><param name="movie" value="'+e.swfUrl+'" /><param name="quality" value="high" /><param name="FlashVars" value="'+fn.escapeHTML(i)+'" /><param name="wmode" value="transparent" /><param name="allowScriptAccess" value="always" /><embed src="'+e.swfUrl+'" quality="high" width="100%" height="100%" wmode="transparent" name="movie" allowScriptAccess="always" FlashVars="'+i+'" type="application/x-shockwave-flash" pluginspage="'+n+'www.adobe.com/go/getflashplayer" /></object>'},Theme.generatorCustom=function(e,t){return 0==e.type?(e.background=t.background,e.buttonBackground=t.buttonBackground,e.link=t.link,Theme.getSimpleHtml(e)):2==e.type?(e.swfUrl=t.swfUrl,e.height=t.height,e.width=t.width,Theme.generatorFlash(e)):Theme.generatorDefault(e)},Theme.getSimpleHtml=function(e){var t="",i="https:"==document.location.protocol?"https://":"http://";return-1!=e.background.indexOf(".swf")?(t='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+i+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="100%" height="100%" id="inviteFlash"><param name="movie" value="'+e.background+'"/><param name="quality" value="high"/><param name="wmode" value="transparent"/><embed id="inviteFlash" src="'+e.background+'" quality="high" width="100%" height="100%" type="application/x-shockwave-flash" wmode="transparent" pluginspage="'+i+'www.adobe.com/go/getflashplayer" /></object><div id="invite_title">'+fn.urlDecode(e.inviteTitle)+'</div><div id="invite_text">'+fn.urlDecode(fn.unescapeHTML(e.inviteWelcome))+"<p>"+fn.unescapeHTML(fn.urlDecode(e.inviteWord))+"</p></div><div id=\"invite_btn\"><a target='_blank'  href='javascript:void(0);' style='text-decoration:none'  onclick=\"return globalInviteWindow.accept(this);\"><button class=\"accept\"><span>"+fn.urlDecode(e.accept)+"</span></button></a><a href='javascript:void(0);' style='text-decoration:none'><button class=\"cancel\" onclick=\"globalInviteWindow.refuse();\"><span>"+fn.urlDecode(e.cancel)+"</span></button></a></div>",t+='<style type="text/css">#invite_btn button{background-image:url('+e.buttonBackground+");background:url("+e.buttonBackground+") no-repeat !important}}</style>"):(t='<div id="invite_bg"></div><div id="invite_title">'+fn.urlDecode(e.inviteTitle)+'</div><div id="invite_text">'+fn.urlDecode(e.inviteWelcome)+"<p>"+fn.urlDecode(fn.unescapeHTML(e.inviteWord))+"</p></div><div id=\"invite_btn\"><a target='_blank'  href='javascript:void(0);' style='text-decoration:none'  onclick=\"return globalInviteWindow.accept(this);\"><button class=\"accpet\" ><span>"+fn.urlDecode(e.accept)+"</span></button></a><a href='javascript:void(0);' style='text-decoration:none'><button class=\"cancel\" onclick=\"globalInviteWindow.refuse();return false;\"><span>"+fn.urlDecode(e.cancel)+"</span></button></a></div>",t+='<style type="text/css">#InviteWindow{background-image:url('+e.background+");}#invite_btn button{background-image:url("+e.buttonBackground+");background:url("+e.buttonBackground+") no-repeat !important}}</style>"),e.link&&0!=e.link.length&&(t+="<link type='text/css' href='"+e.link+"' rel='stylesheet'/>"),t},Theme.processDefaultValue=function(e){e.background=fn.getServerPrefix()+"/chatClient/invite/theme/live800/images/invite.swf",e.link=fn.getServerPrefix()+"/chatClient/invite/theme/live800/invite.css"+(isSSLReq?"?ss=1":""),e.buttonBackground=fn.getServerPrefix()+"/chatClient/invite/theme/live800/images/invite_bt.gif",fn.get("InviteWindow").innerHTML=Theme.getSimpleHtml(e)},MobileIcon.prototype={init:function(){var e=fn.urlToParams(mobile_icons_cfg);this.icon_isOpen=fn.urlDecode(e.icon_isOpen),this.color=fn.urlDecode(e.icon_color),this.chat_words=fn.urlDecode(e.icon_chat_words),this.tel_open=fn.urlDecode(e.icon_tel_open),this.tel_words=fn.urlDecode(e.icon_tel_words),this.tel_number=fn.urlDecode(e.tel_number),this.icon_position=fn.urlDecode(e.icon_position),this.chatMode=fn.urlDecode(e.icon_chat_mode),this.chat_offwords=fn.urlDecode(e.icon_off_line_words),this.company_status=live800_status,this.vWith=50,this.vHeight=200,this.hWith=50,this.hHeight=200,this.devicePixelRatio=window.devicePixelRatio,this.zoomTimer,this.zoomMult,this.leavewordEnable="undefined"==typeof leavewordEnable?"0":leavewordEnable,"1"==this.icon_isOpen&&browseInfo.ismobile||(this.isDisplay=!1)},showMobileIco:function(e){this.loadMSkin(),"b"!=this.icon_position&&(this.tel_words=this.replaceDirec(this.tel_words),this.chat_words=this.replaceDirec(this.chat_words));var t,i="",n="lim_m_"+this.icon_position;this.zoomLevel();i="rm"!=this.icon_position&&"lm"!=this.icon_position&&"l"!=this.icon_position&&"r"!=this.icon_position||"1"!=this.company_status&&("0"!=this.company_status||"0"!=this.leavewordEnable)?'<div id="lim_mchat_wrapper"  style="background-color:'+this.color+';">':'<div id="lim_mchat_wrapper"  style="width:25px;background-color:'+this.color+';">',"1"==this.tel_open&&(n+=" lim_m_sgl ",i+='<a id="lim_tel_icon" target="_blank" href="tel:'+this.tel_number+'"><span>'+this.tel_words+'</span></a><div class="lim_bdr_gap">&nbsp;</div>'),("1"==this.company_status||"0"==this.company_status&&"0"==this.leavewordEnable)&&(i+='<a id="lim_mob_chat" onclick="globalMobileIcon.openMobileInnerChat();" target="_blank"><span>'+e+"</span></a>"),i+='<div id="lim_chat_tip"><div id="lim_tip_words">new mess tip</div><div id="lim_tip_arr1"></div></div></div>',(t=fn.createNode("div",{id:"lim_mobile_chat"},n)).innerHTML=i,document.body.appendChild(t);var o,a=this,s={},r=fn.get("lim_mobile_chat");o=setInterval(function(){r.getComputedStyle?(s.borderBottomStyle=r.currentStyle.borderBottomStyle,s.opacity=r.currentStyle.opacity):(s.borderBottomStyle=window.getComputedStyle(r,null).borderBottomStyle,s.opacity=window.getComputedStyle(r,null).opacity),"dashed"==s.borderBottomStyle&&(a.zoomUI(),clearInterval(o))},50),fn.addEvent(window,"orientationchange",a.zoomUI),fn.addEvent(window,"resize",a.zoomUI),fn.addEvent(window,"scroll",a.zoomUI),fn.addEvent(window,"touchmove",a.zoomUI),fn.addEvent(window,"MSPointerMove",a.zoomUI),this.tipBox=fn.get("lim_chat_tip"),this.tipWord=fn.get("lim_tip_words"),this.chatAnchor=fn.get("lim_mob_chat")},generate:function(){var e=this.chat_words;"0"==this.company_status&&(e=this.chat_offwords),this.isDisplay&&this.showMobileIco(e)},openMobileInnerChat:function(){isMobile&&"2"==globalVisitHandle.pageChater.getChatOpenMode()&&setTimeout(function(){fn.addClass(document.body,"lim_chat_hid")},800),globalVisitHandle.pageChater.openPageChat(!1),clearTimeout(globalVisitHandle.delayTimer)},messageTip:function(e,t){var i=this,t=t||6e3;i.tipBox.className="showTip",i.tipWord.innerHTML=e,setTimeout(function(){i.tipBox.className="hideTip"},t)},zoomUI:function(){globalMobileIcon=globalMobileIcon||new MobileIcon;var e=globalMobileIcon,t=fn.get("lim_mobile_chat"),i=fn.get("lim_mchat_wrapper");e.zoomMult=e.zoomLevel(),e.zoomTimer=setTimeout(function(){clearTimeout(e.zoomTimer);var n="scale("+e.zoomMult+")";if(t.style.cssText="border-bottom-style:none;-webkit-transform:"+n+";-moz-transform:"+n+";-ms-transform:"+n+";-o-transform:"+n+";transform:"+n,"b"==e.icon_position){var o=i.offsetWidth*e.zoomMult;t.style.marginLeft=o/2-o+"px"}else null!=e.chat_words&&e.chat_words.length>0&&(i.style.paddingBottom="10px");if("lm"==e.icon_position||"rm"==e.icon_position){var a=t.offsetHeight*e.zoomMult;t.style.marginTop=a/2-a+"px"}i.style.position="relative",t.style.visibility="visible"},300)},loadMSkin:function(e){var t=fn.$tagName("head")[0],i={id:"lim_m_style",type:"text/css",rel:"stylesheet",href:fn.getServerPrefix()+"/chatClient/style/mobile.css"+(isSSLReq?"?ss=1":"")},n=fn.createNode("link",i);t.appendChild(n)},replaceDirec:function(e){for(var t=fn.unescapeHTML(e).split(""),i="",n=0;n<t.length;n++)t[n]&&(i+=t[n]+"<br/>");return i},zoomLevel:function(){function e(){var e=window.navigator.userAgent.toLowerCase()||"";return/(iemobile|windows phone)/.test(e)}function t(){var e=window.navigator.userAgent.toLowerCase()||"",t=window.navigator.vendor&&window.navigator.vendor.toLowerCase()||"";return/[google inc.|ucweb]/.test(t)&&(!/chrome/.test(e)||/samsung/.test(e))}return(1/function(){var i=window.document.documentElement.clientWidth,n=i/window.document.documentElement.clientHeight>1.2,o=window.screen.width,a=window.screen.height;n&&o<a&&(o=window.screen.height,a=window.screen.width);var s=window.innerWidth,r=i/o;window.devicePixelRatio&&t()&&o>640?r*=window.devicePixelRatio:e()&&(r*=1.5);var l=i/s/r;return l/=1.2,l=l.toFixed(2)}()).toFixed(2)}},PageChater.prototype={start:function(e,t){this.chatDiv=fn.get("lim_mini_chat"),this.chatsty=this.chatDiv.style,this.effectsEl=fn.get("lim_mini_effects");o=this;if(this.pageMessager.listen(),!this.client.pageChating){fn.get("lim_mini")&&(fn.get("lim_mini").style.display="none");var i=this.client.getInitiatedChatUrl(),n=cfg.companyId;if(i=e?i.replace(/&skillId=[\d]+/g,""):"4"==t?i.replace("&chatType=2","&chatType=4"):i.replace("&chatType=2",""),specials[n])return specials[n].apply(window,[i]),void(this.invite&&this.invite.hide());if(!this.client.pageChating){if(vis.initValue="init","3"==this.getChatOpenMode()&&isMobile)return this.icon.chatAnchor.href=i+"&t="+(new Date).getTime(),!0;if(i+="&inw=1",vis.initChatInIframe(i+"&inviteStyle="+this.handle.getInviteStyle()+"&block=1",this.handle.getInviteStyle()),isMobile)fn.addEvent(window,"resize",function(){setTimeout(function(){o.chatDiv.offsetHeight>0&&o.showPageChat()},50)});else{var o=this;fn.dragWindow(fn.$class("mini_wrap",this.chatDiv)[0],this.chatDiv),fn.$class("close",this.chatDiv)[0].onclick=function(){"undefined"!=typeof default_exit_words?sConfirm||document.getElementById("sConfirm")?sConfirm(default_exit_words,null,null,function(){o.closePageChat()}):new JSONRequest(fn.getServerPrefix()+"/chatClient/customAlert.js","sConfirm",function(){sConfirm(default_exit_words,null,null,function(){o.closePageChat()})}):o.closePageChat()},fn.$class("opCloseChatDiv",this.chatDiv)[0].onclick=function(){"undefined"!=typeof globalVisitClient&&(globalVisitClient.pageChating=!1)},fn.$class("maximize",this.chatDiv)[0].onclick=function(){o.maxChatWindow()},fn.$class("minimize",this.chatDiv)[0].onclick=function(){o.hidePageChat()}}("undefined"!=typeof autoChat&&1==autoChat||cfg.autoInitialChat&&"1"==cfg.autoInitialChat.autoChat&&"4"==t)&&isMobile?autoChat=0:(this.showPageChat(),cfg.autoInitialChat&&1==cfg.autoInitialChat.autoChat&&2==cfg.autoInitialChat.chatMode||(this.client.pageChating=!0)),this.invite&&this.invite.hide()}}},unreadMessTip:function(e){this.unreadMessNum++,this.icon&&this.icon.messageTip(e,1e4)},openPageChat:function(e){this.client.pageChating?this.showPageChat():(this.start(e),isMobile&&this.pageMessager.send("{cmd:'MC03'}"))},getChatOpenMode:function(){var e="3",t=fn.$tagName("meta"),i=this.icon.chatMode;for(var n in t)if(t[n].name&&"viewport"==t[n].name.toLowerCase()&&t[n].content){e="2";break}return"3"==i?e="3":"2"==i&&(e="2"),e},hidePageChat:function(e){if(isMobile){var t=this;fn.removeClass(document.body,"lim_chat_hid"),this.chatsty.height="0px",setTimeout(function(){t.icon.zoomUI()},1),void 0!==e&&""!=e&&globalMobileIcon.messageTip(e)}else this.effectsEl.src=cfg.webAppUrl+"/chatClient/effects2013.html?"+(new Date).getTime(),this.chatsty.visibility="hidden",this.chatsty.zIndex="-1",fn.get("lim_mini").style.display="",fn.get("lim_minicon").className="lim_mini_chat_hide"},closePageChatForNotHidden:function(e){if(isMobile){fn.removeClass(document.body,"lim_chat_hid"),this.chatsty.height="0px"}else{var t=fn.get("chat_iframe").src+"#x=1&inw=1";fn.get("chat_iframe").src=t,this.chatsty.display="none",fn.get("lim_mini").style.display="",fn.get("lim_minicon").className="",this.effectsEl.className="lim_mini_chat_hide",globalVisitClient.pageChating=!1}},showPageChat:function(){isMobile?(this.chatsty.height=window.innerHeight+"px",this.pageMessager.send("{cmd:'MC05'}")):(fn.get("lim_mini").style.display="none",this.chatsty.display="",this.chatsty.visibility="",this.chatsty.zIndex="2147480000",fn.get("lim_minicon").className="lim_mini_chat_hide",this.effectsEl.src=cfg.webAppUrl+"/chatClient/effects2013.html?"+(new Date).getTime(),this.effectsEl.className="")},maxChatWindow:function(){this.chatsty.display="none";var t=this.client.getInitiatedChatUrl()+"&tm="+(new Date).getTime(),i=(vis.chatWindow,globalWindowAttribute);isSSLReq&&(t+="&ss=1"),t=t.replace("&chatType=2","");try{"undefined"!=typeof vis.chatWindow&&null!=vis.chatWindow||(vis.chatWindow=window.open(t,"chatbox"+cfg.companyId+("undefined"!=typeof live800_chatVersion&&5==live800_chatVersion?(new Date).getTime():""),i));try{vis.chatWindow.focus(),vis.chatWindow.opener=window}catch(e){vis.chatWindow=navigateToUrl(t,"chatbox"+cfg.companyId,i)}}catch(e){}var n=this;return setTimeout(function(){n.closePageChat()},1e4),!1},closePageChat:function(){var e=fn.get("chat_iframe").src+"#x=1&inw=1";fn.get("chat_iframe").src=e,this.chatsty.display="none",fn.get("lim_mini").style.display="",fn.get("lim_minicon").className="",this.effectsEl.className="lim_mini_chat_hide",globalVisitClient.pageChating=!1}},window.openFlashWin=function(){globalInviteWindow.isauto?vis.opendChat():globalVisitHandle.onInviteWindowAccept(),globalInviteWindow.showInvite=!1,globalInviteWindow.setVisiblity(!1)},PageMessager.prototype={listen:function(e){var t=this;"funciton"!=typeof e&&fn.addEvent(window,"message",function(e){t.processor(e)})},send:function(t){if(this.receiver&&this.origin)try{this.receiver.postMessage(t,this.origin)}catch(e){}},_prepareReceiver:function(e){e==this.media[0]&&(this.receiver=fn.get("chat_iframe").contentWindow),"undefined"!=typeof autoChat&&globalVisitHandle.pageChater.pageMessager.send("{cmd:'CC03'}")},processor:function(e){var dobj;try{switch((dobj=eval("("+e.data+")")).cmd){case"CC01":this.origin=dobj.data,this._prepareReceiver(this.media[0]),this.send("{cmd:'MC03'}");break;case"CC02":globalVisitHandle.pageChater.hidePageChat(dobj.data);break;case"MC04":globalVisitHandle.pageChater.unreadMessTip(dobj.data);break;case"CC04":globalVisitHandle.pageChater.closePageChatForNotHidden(dobj.data);break;case"CC05":globalMobileIcon.openMobileInnerChat();break;case"CC06":changeScrollTop(dobj.data);break;case"CC07":globalVisitClient.pageChating=!1}}catch(e){throw e}}},vis.start()}}(document);