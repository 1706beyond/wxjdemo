(function(f){var a=navigator,b=a.userAgent,d=".spice",h=!!b.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i),e=/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/,c=/^(1[3-9]{1}[0-9]{1})\d{8}$/;var k=function(){if(!(this instanceof arguments.callee)){return new k()}};k.prototype={namespace:d,hasTouch:h,nav:a,ua:b,trident:b.indexOf("Trident")>-1,presto:b.indexOf("Presto")>-1,webKit:b.indexOf("AppleWebKit")>-1,gecko:b.indexOf("Gecko")>-1&&b.indexOf("KHTML")==-1,mobile:!!b.match(/AppleWebKit.*Mobile.*/),ios:!!b.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:b.indexOf("Android")>-1||b.indexOf("Adr")>-1,iPhone:b.indexOf("iPhone")>-1||b.indexOf("Mac")>-1,iPad:b.indexOf("iPad")>-1,webApp:b.indexOf("Safari")==-1,mouseenter:h?"touchend"+d+" touchcancel"+d:"mouseenter"+d,mouseleave:h?"touchend"+d+" touchcancel"+d:"mouseleave"+d,mousedown:h?"touchstart"+d:"mousedown"+d,mouseup:h?"touchend"+d+" touchcancel"+d:"mouseup"+d,mousemove:h?"touchmove"+d:"mousemove"+d,click:h?"touchend"+d+" touchcancel"+d:"click"+d,tap:"tap"+d};var j=f.spice=k();var i={getMaxZIndex:function(){return Math.max.apply(null,f(document.body).children().map(function(){return(f(this).css("zIndex")<0?0:f(this).css("zIndex"))>>>0}).get())},getEvent:function(l){return j.hasTouch?l.originalEvent.changedTouches:l},getEventXY:function(m){var l=this.getEvent(m);return{x:l.clientX?l.clientX:(l[0]?l[0].pageX:0),y:l.clientY?l.clientY:(l[0]?l[0].pageY:0)}},getStringLength:function(p){var n=0,o=0,m=p.length,l;for(;o<m;o++){l=p.charCodeAt(o);n+=l>127?2:1}return n},subString:function(q,l,t){var n=0,o=0,m,r="",p=q.length,s=i.getStringLength(q);if(l<0){l=s+l}if(t<0||f.type(t)!="number"){t=~~t+s}else{t+=l}for(;n<p;n++){if(o>=l){break}var m=q.charCodeAt(n);o+=m>127?2:1}for(;n<p;n++){var m=q.charCodeAt(n);o+=m>127?2:1;if(o>t){break}r+=q.charAt(n)}return r},getURLParameter:function(l,p){var o=(p||window).location.search,m=new RegExp("[&?]+"+l+"=([^&]*)"),n="";if(m.test(o)){n=RegExp.$1}return n},visualArea:function(n,l){if(!n||!f.spice.isString(n)||f(n).length==0){return false}var m={callBack:null,num:0};m=f.extend({},m,l);f(window).on("scroll.spice.visualArea",function(){var o=f(this);if(o.scrollTop()+o.height()>f(n).offset().top-m.num){m.callBack&&f.isFunction(m.callBack)&&m.callBack(f(n))}}).trigger("scroll.spice.visualArea")},getCookie:function(o){var l=document.cookie,m=new RegExp(o+"=([^;]*)");var n="";if(m.test(l)){n=RegExp.$1}return n},getDates:function(m){var n=["s","m","h","D","W","M","Y"];var u=m.length;var t={};var v=24*60*60;var q=0;var r=m.match(/\d+\w/g);if(r==null){return false}for(var p=0,o=r.length;p<o;p++){new RegExp("^(\\d+)([a-z]+)$","i").test(r[p]);t[RegExp.$2]=RegExp.$1}if(t.s){q=+t.s}if(t.m){q+=+t.m*60}if(t.h){q+=+t.h*60*60}if(t.D){q+=+t.D*v}if(t.W){q+=+t.W*v*7}if(t.M){q+=+t.M*v*30}if(t.Y){q+=+t.Y*v*365}return q*1000},setCookie:function(q,m){var p=[];if(typeof m=="string"){p=m}else{if(typeof m.values=="object"){for(var n in m.values){p.push(n+"="+m.values[n]+"&")}p=p.join("").slice(0,-1)}else{p=m.values}}var l=q+"="+p;if(m.expires){l+=";expires="+new Date(new Date().getTime()+i.getDates(m.expires)).toGMTString()}if(m.path){l+=";path="+m.path}if(m.domain){l+=";domain="+m.domain}if(m.secure===true){l+=";secure"}document.cookie=l},delCookie:function(n){var l=document.cookie,m=new RegExp(n+"=[^;]?");if(m.test(l)){document.cookie=n+"=;expires="+new Date(-1).toGMTString()}},getTimeUrl:function(l){var m=(new Date()).getTime();if(l.indexOf("spiceflag=")>=0){l=l.replace(/spiceflag=\d{13}/,"spiceflag="+m.toString());return l}l+=(/\?/.test(l))?"&":"?";return(l+"spiceflag="+m.toString())},_ajaxSetValue:function(n,l,m){if(m===null){return}var o=n[l];if(f.spice.isString(o)){n[l]=[o,m]}else{if(f.isArray(o)){n[l].push(m)}else{n[l]=m}}},_ajaxFieldValue:function(n){var l=null,m=(n.type||"").toLowerCase();if(n.name&&m&&!n.disabled){if(m==="radio"||m==="checkbox"){if(n.checked){l=n.value}}else{if(n.multiple){l=[];f("option",n).each(function(){if(this.selected){l.push(this.value)}})}else{l=n.value}}}return l},_ajaxFormToObj:function(n){if(!n){return{}}n=f.spice.isString(n)?f("#"+n).get(0):n;var m={},l="file|submit|image|reset|button|";f.each(n.elements,function(p,r){var o=r.name,q=(r.type||"").toLowerCase();if(o&&q&&l.indexOf(q)===-1&&!r.disabled){i._ajaxSetValue(m,o,i._ajaxFieldValue(r))}});return m},_ajaxOptions:function(n,o,m){var l={};n=i.getTimeUrl(n);if(arguments.length===1){l=n}else{l=m||{};l.url=n;if(o){if(f.spice.isString(o)){f.extend(l,{data:i._ajaxFormToObj(o)})}else{f.extend(l,{data:o})}}}return l},asyncXhr:function(m,n,l){f.ajax(i._ajaxOptions(m,n,l))},asyncXhrGet:function(n,o,m){var l=i._ajaxOptions(n,o,m);l.type="GET";f.ajax(l)},asyncXhrPost:function(n,o,m){var l=i._ajaxOptions(n,o,m);l.type="POST";f.ajax(l)},syncXhr:function(n,p,m){var o,l=i._ajaxOptions(n,p,m);f.extend(l,{async:false,success:function(q,r){o=q},error:function(r,t,s){o={};var q={};q.message="Error occurs when fetching data from url:"+this.url;q.cause=t?t:s;o.exception=q}});f.ajax(l);return o},syncXhrGet:function(m,n,l){if(arguments.length===1){m.type="GET"}else{l=f.extend({},l,{type:"GET"})}return i.syncXhr(m,n,l)},syncXhrPost:function(m,n,l){if(arguments.length===1){m.type="POST"}else{l=f.extend({},l,{type:"POST"})}return i.syncXhr(m,n,l)}};i.dialog=function(m){if(!(this instanceof arguments.callee)){return new i.dialog(m)}var l=this;var n=l.opt=f.extend({},l.defaultOptions,m);l.init()};i.dialog.prototype={getTemplate:function(){var l=this,m=l.opt.button,n=l.opt.type,p=l.opt.title,o=l.opt.content;return'<div class="dialog">                        <div class="dialog-container text-center">'+(p?("<h4>"+p+"</h4>"):"")+(o?("<p>"+o+"</p>"):"")+'<div class="dialog-btn-wrap">                                <a class="btn btn-success">'+(m[0]||"确认")+"</a>"+(n=="confirm"?'<a class="btn btn-cancel">'+(m[1]||"取消")+"</a>":"")+'</div>                        </div>                        <a class="icon icon-close dialog-close">&times;</a>                    </div>'},defaultOptions:{template:"",type:"info",dialogClass:"spice-dialog",fixed:false,title:"",content:"",button:["确认","取消"],btnSuccessClass:".btn-success",btnCancelClass:".btn-cancel",btnCloseClass:".dialog-close",maskClose:true},_trigger:function(l,m){this.elem.triggerHandler(l,m)},init:function(m){var l=this,n=l.opt=f.extend({},l.opt,m);l.destroy();l.elem=l.createElem(n.template);f.each(["submit","initEvent"],function(o,p){f.isFunction(n[p])&&l.elem.on(p,n[p])});l._trigger("initEvent",[f(l.elem)]);l.btnSuccess=f((n.btnSuccessClass||".btn-success"),l.elem);l.btnCancel=f((n.btnCancelClass||".btn-cancel"),l.elem);l.btnClose=f((n.btnCloseClass||".dialog-close"),l.elem);l.elemMask=i.mask();l.activate();return l},activate:function(){var l=this;l.btnSuccess.on("tap",function(){if(!f.isFunction(l.opt.submit)){l.hide();return false}l._trigger("submit")});l.btnCancel.add(l.btnClose).on("tap",function(){l.hide()});if(l.opt.maskClose){l.elemMask&&l.elemMask.elem.on("tap",function(){l.hide()})}},refreshPosition:function(o){o.removeAttr("style").hide();var n=o.outerWidth(true),p=o.outerHeight(true),q={marginTop:-p/2,marginLeft:-n/2,left:"50%",top:"50%",position:"fixed"};if(!this.opt.fixed){var m=f(window).scrollTop(),l=f(window).height();q.position="absolute";q.marginTop="";q.top=(m+(l-p)/2)<0?0:(m+(l-p)/2)}o.css(q)},createElem:function(o){var l=this,n=l.opt;var m=f(o||l.getTemplate()).addClass(n.dialogClass).hide().appendTo("body");l.refreshPosition(m);m.css("zIndex",j.getMaxZIndex()+2);return m},refreshZIndex:function(){this.elem.css("zIndex",j.getMaxZIndex()+1);return this},show:function(l){this.refreshPosition(this.elem);this.elem.fadeTo(0,1,l);this.elemMask.show();this.elem.css("zIndex",j.getMaxZIndex()+2);return this},hide:function(l){this.elem.fadeOut(0,l);this.elemMask.hide();return this},destroy:function(){this.elem&&this.elem.remove();this.elemMask&&this.elemMask.remove();return this}};i.mask=function(m){if(!(this instanceof arguments.callee)){return new i.mask(m)}var l=this;l.opt=f.extend({},l.defaultOptions,m);l.elem=l.createElem()};i.mask.prototype={defaultOptions:{style:{position:"fixed",width:"100%",height:"100%",top:0,left:0,display:"none",backgroundColor:"#000000",zIndex:100,opacity:0}},createElem:function(){var l=f(".spice-black-opacity");return f("<div>",{"class":"spice-black-opacity"}).css(this.opt.style).css("zIndex",j.getMaxZIndex()+2).appendTo("body")},show:function(l){this.elem.fadeTo(500,0.5,l);return this},hide:function(l){this.elem.fadeOut(500,l);return this},setZIndex:function(l){this.elem.css("zIndex",l);return this},refreshZIndex:function(){this.elem.css("zIndex",j.getMaxZIndex()-1);return this},remove:function(){this.elem.remove();return this}};f.extend(f.spice,i);f.extend(f.spice,{isUndefined:function(l){return l===undefined},isNull:function(l){return l===null},isBoolean:function(l){return toString.call(l)==="[object Boolean]"},isString:function(l){return toString.call(l)==="[object String]"},checkEmail:function(n,l){try{return(l||e).test(n)}catch(m){return false}},checkMobile:function(n,l){try{return(l||c).test(n)}catch(m){return false}}});f.each("tap".split(" "),function(m,l){f.fn[l]=function(n){return n?this.on(l,n):this.trigger(l)};if(f.attrFn){f.attrFn[l]=true}});function g(p,m,o,l){var n=o.type;o.type=m;if(l){f.event.trigger(o,undefined,p)}else{f.event.dispatch.call(p,o)}o.type=n}f.event.special.tap={setup:function(p,o,n){function q(){return{sx:0,sy:0,ex:0,ey:0}}var m=q();var l=f(this);if(f.spice.hasTouch&&!f.spice.android){l.on(f.spice.mousedown,function(r){var s=f.spice.getEventXY(r);m.sx=s.x;m.sy=s.y}).on(f.spice.click,function(r){var s=f.spice.getEventXY(r);m.ex=s.x;m.ey=s.y;if(m.sx==m.ex&&m.sy==m.ey){g(l[0],"tap",r);m=q()}})}else{l.on(f.spice.click,function(r){g(l[0],"tap",r)})}},teardown:function(l){f(this).off(f.spice.click).off(f.spice.mousedown)}};f.extend(f.spice,{tips:function(n){function m(q,p){return'<div class="dialog">                            <div class="dialog-container text-center">'+(q?"<h4>"+q+"</h4>":"")+(p?"<p>"+p+"</p>":"")+'</div>                            <a class="icon icon-close dialog-close">&times;</a>                        </div>'}var o=f.extend({},{dialogClass:"dialog-tips",title:"",content:"",time:1500,template:"",callBack:function(){}},n),l=f.spice.dialog({dialogClass:o.dialogClass,fixed:true,template:o.template||m(o.title,o.content)});l.show(function(){setTimeout(function(){l.destroy();o.callBack()},o.time)})}})})(jQuery);(function(){var d;var b=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"];var c=b.length;var a=(window.console=window.console||{});while(c--){d=b[c];if(!a[d]){a[d]=$.noop}}}());
(function(f){var j=f.spice.android,h=f.spice.hasTouch,c=h?"touchstart.kvScroll":"mousedown.kvScroll",b=h?"touchmove.kvScroll":"mousemove.kvScroll",e=h?"touchend.kvScroll touchcancel.kvScroll":"mouseleave.kvScroll",i=h?"touchend.kvScroll":"mouseup.kvScroll";var d={type:"scroll",axis:"x",easing:"normal",autoPlay:true,time:3000,loop:true,moveNum:1,stopElem:null,callBack:null,dot:{style:null,dotsEvent:"tap"},btn:true};var a={fade:function(o,n){var m=o.opt,l=o.ul,p=o.li;p.not(":eq("+n+")").hide();p.eq(n).fadeIn(m.easing,function(){o.curPage=n;o.initDotsAClass(o.curPage);!o.isHover&&o.addInterval()});m.callBack&&f.isFunction(m.callBack)&&m.callBack(o.curPage,o)},scroll:function(q,o){var n=q.opt,l=q.ul,r=q.li,p={},m=q.getLiH();if(n.axis=="y"){p.marginTop="-"+o*m+"px"}else{p.marginLeft="-"+o*100+"%"}l.animate(p,n.easing,function(){q.curPage=o;if(n.type=="scroll-loop"&&n.loop){if(o==0){if(n.axis=="y"){p.marginTop="-"+(q.liLength-2)*m+"px"}else{p.marginLeft="-"+(q.liLength-2)*100+"%"}l.css(p);q.curPage=q.liLength-2}else{if(o==q.maxPage){p[(n.axis=="y"?"marginTop":"marginLeft")]=q.initMG;l.css(p);q.curPage=1}else{q.curPage=o}}}q.initDotsAClass(q.curPage-(n.type=="scroll-loop"&&n.loop?1:0));n.callBack&&f.isFunction(n.callBack)&&n.callBack(o,q);!q.isHover&&q.addInterval()})},"scroll-loop":function(m,l){a.scroll(m,l)},gallery:function(q,o){var n=q.opt,m=q.ul,r=q.li,p={};var l=-o*(n.axis=="y"?q.getLiH():q.getLiW())*q.moveNum;l=l<q.galleryMaxMG?q.galleryMaxMG:l;p[(n.axis=="y"?"marginTop":"marginLeft")]=l;m.animate(p,n.easing,function(){q.curPage=o;n.callBack&&f.isFunction(n.callBack)&&n.callBack(o,q);!q.isHover&&q.addInterval()})},"gallery-loop":function(u,r,s){if(h){a.gallery(u,r);return false}var m=u.opt,q=u.ul,t=u.li,n=u.getLiW(),l=-n*u.moveNum,o=u.getUlMl()+(s=="prev"?-l:l),p={marginLeft:o};if(s=="prev"){if(u.getUlMl()>-u.getLiW()*u.moveNum){q.css({marginLeft:(u.getUlMl()/n-t.length/3)*n});p.marginLeft=u.getUlMl()-l}}else{if(u.getUlMl()<-u.getLiW()*(t.length/3-1)){q.css({marginLeft:(u.getUlMl()/n+t.length/3)*n});p.marginLeft=u.getUlMl()+l}}q.animate(p,m.easing,function(){})},sx:0,sy:0,mx:0,my:0,sMl:0,sMt:0,sMoveTime:0,eMoveTime:0,scrollHover:function(m){var l=m.opt;var n=m.elem;if(h){n=n.find("ul:eq(0)")}n.off(".kvScroll").on(c,function(p){if(l.axis=="y"){p.preventDefault()}m.removeInterval();m.isHover=true;var o=f.spice.getEventXY(p);a.sMl=m.getUlMl();a.sMt=m.getUlMt();a.sx=o.x;a.sy=o.y;a.mx=0;a.my=0;a.sMoveTime=new Date().getTime()}).on(b,function(r){m.removeInterval();m.isHover=true;if(h&&m.isStopElem()){var o=f.spice.getEventXY(r);a.mx=o.x;a.my=o.y;if(Math.abs(a.mx-a.sx)>8&&l.axis!="y"){r.preventDefault()}if(l.type!="fade"){if(l.axis=="y"){var p=a.my-(a.sy-a.sMt)}else{var p=a.mx-(a.sx-a.sMl)}var q={};q[(l.axis=="y"?"marginTop":"marginLeft")]=p;if(l.type=="scroll"||(l.type=="scroll-loop"&&!l.loop)){if(p>0){q[(l.axis=="y"?"marginTop":"marginLeft")]=Math.abs(p)/3;m.ul.css(q)}else{if(p<-m.maxPage*m.li.width()&&l.axis!="y"){m.ul.css({marginLeft:(a.mx-(a.sx-a.sMl)-a.sMl)/3+a.sMl})}else{if(p<-m.maxPage*m.li.height()&&l.axis=="y"){m.ul.css({marginTop:(a.my-(a.sy-a.sMt)-a.sMt)/3+a.sMt})}else{m.ul.css(q)}}}}else{if(l.type=="gallery"||l.type=="gallery-loop"){if(p>0){q[(l.axis=="y"?"marginTop":"marginLeft")]=Math.abs(p)/3;m.ul.css(q)}else{if(p<m.galleryMaxMG&&l.axis!="y"){m.ul.css({marginLeft:(p-m.galleryMaxMG)/3+m.galleryMaxMG})}else{if(p<-m.maxPage*m.li.height()&&l.axis=="y"){m.ul.css({marginTop:(p-m.galleryMaxMG)/3+m.galleryMaxMG})}else{m.ul.css(q)}}}}else{m.ul.css(q)}}}}}).on(e,function(s){m.addInterval();m.isHover=false;if(h&&m.isStopElem()){if(l.type=="scroll"||l.type=="scroll-loop"){var w=m.getUlMl(),r=m.getUlMt(),u=m.getLiW(),q=m.getLiH();if(Math.abs(a.sMl-w)>(j?10:25)||Math.abs(a.sMt-r)>(j?10:25)){if(l.axis=="y"){m.curPage=Math.ceil(Math.abs(r/q))-(a.sMt>r?0:1)}else{m.curPage=Math.ceil(Math.abs(w/u))-(a.sMl>w?0:1)}m.curPage=m.curPage>m.maxPage?m.maxPage:m.curPage}a.mx&&m.scroller(m.curPage)}else{if(l.type=="fade"){if(a.mx==0){m.curPage=m.curPage}else{if(Math.abs(a.sx-a.mx)>(j?10:25)){m.curPage=a.sx>a.mx?m.curPage+1:m.curPage-1}}if(m.curPage<0){m.curPage=l.loop?m.maxPage:0}if(m.curPage>m.maxPage){m.curPage=l.loop?0:m.maxPage}m.scroller(m.curPage)}else{if(l.type=="gallery"||l.type=="gallery-loop"){var t=f.spice.getEventXY(s);a.eMoveTime=new Date().getTime();if(l.axis=="y"){var p=(t.y-a.sy)/(a.eMoveTime-a.sMoveTime)}else{var p=(t.x-a.sx)/(a.eMoveTime-a.sMoveTime)}(function(o,z,B){var x=o>0?-1:1;var y=x*0.005;function A(){var F=new Date().getTime();var D=F-z;var C=o+D*y;var E=(o+C)/2*D;var G={};if(x*C>0){if(l.axis=="y"){m.curPage=parseInt(Math.abs(m.getUlMt()/m.getLiH()))}else{m.curPage=parseInt(Math.abs(m.getUlMl()/m.getLiW()))}return}var v=B+E;if(v<=m.galleryMaxMG){G[(l.axis=="y"?"marginTop":"marginLeft")]=m.galleryMaxMG;m.ul.animate(G,"normal");return false}if(v>=0){G[(l.axis=="y"?"marginTop":"marginLeft")]=0;m.ul.animate(G,"normal");return false}G[(l.axis=="y"?"marginTop":"marginLeft")]=v;m.ul.css(G);setTimeout(A,10)}A()})(p,a.eMoveTime,(l.axis=="y"?m.getUlMt():m.getUlMl()))}}}}})},getDotHtml:function(q,n){var m=n.opt.dot,p=m.style;if(p&&q>1){var l='<div class="scroll-dots">';for(var o=1;o<=q;o++){if(p=="dot"){l+="<a"+(o==1?' class="active"':"")+">"+o+"<i></i></a>"}else{if(p=="text"){l+='<a class="dots-text'+(o==1?" active":"")+'">'+(n.li.eq(o-1).attr("data-title")||o)+"<i></i></a>"}else{if(p&&f.isFunction(p)){l+=p(n.li.eq(o-1))||""}}}}l+="</div>";f(".scroll-dots",n.elem).remove();n.elem.append(l);f(".scroll-dots > *:eq(0)",n.elem).addClass("active")}}};var k=function(l,m){var n=this;n.opt=f.extend({},d,m);n.elem=l;if(!a[n.opt.type]){return false}n.btnPrev=f(".scroll-btn-prev",l);n.btnNext=f(".scroll-btn-next",l);n.ul=f("ul:eq(0)",l);n.init()};k.prototype={init:function(){var r=this,n=r.opt,o=r.elem,m=r.ul;var s=r.li=f(">li",m);r.curPage=0;r.destroy();s=r.li=f(">li",m);var q=r.liLength=s.length,l=r.initMG=0;a.getDotHtml(q,r);r.dots=f(".scroll-dots",o);r.dotsA=f("> *",r.dots);var p=function(t){var t=f.Deferred();var u=function(){var v=f("img:eq(0)",s).attr("src");if(v){f('<img src="'+f("img:eq(0)",s).attr("src")+'">').load(function(){t.resolve()})}else{t.resolve()}};u();return t.promise()};f.when(p()).done(function(){r.maxPage=q-1;var v=r.getLiH();if(n.type=="scroll-loop"&&n.loop){if(q>1){var u=s.first().clone(true).addClass("kvScroll-Clone"),x=s.last().clone(true).addClass("kvScroll-Clone");m.append(u).prepend(x);q=r.liLength=q+2;if(n.axis=="y"){l=r.initMG=-v+"px"}else{l=r.initMG="-100%"}r.maxPage=q-1;r.curPage=1}}if(n.type=="fade"){}else{if(n.type=="gallery"||n.type=="gallery-loop"){f(window).on("resize.gallery",function(){var E=r.getLiW(),A=r.getLiH(),y=r.getDivW(),C=r.getDivH();r.curPage=0;if(n.type=="gallery-loop"&&n.loop&&f("li.kvScroll-Clone",m).length==0&&!h){var B=Math.ceil(y/E);if(y<q*E){var D=f(">li:not([class*=kvScroll-Clone])",m);m.append(D.clone(true).addClass("kvScroll-Clone")).append(D.clone(true).addClass("kvScroll-Clone"))}}m.css({marginLeft:l,marginTop:0});y=r.getDivW();C=r.getDivH();if(n.axis=="y"){var z=parseInt(C/A)}else{var z=parseInt(y/E)}r.moveNum=z<n.moveNum?z:n.moveNum;r.maxPage=Math.ceil((q-z)/r.moveNum);if(n.axis=="y"){r.galleryMaxMG=-A*q+C}else{r.galleryMaxMG=-E*q+y}}).trigger("resize.gallery");if(r.maxPage<=0){return false}}else{if(n.axis=="y"){f(window).on("resize.scroll",function(){v=r.getLiH();f(">div:eq(0)",r.elem).css({height:v})}).trigger("resize.scroll");m.css({marginTop:l});f(">li",m).css({display:"block"})}else{m.css({width:100*(q)+"%",marginLeft:l});f(">li",m).css({width:100/(q)+"%"}).css({display:"block"})}}}r.li=f(">li",m);if(n.axis!="y"){var w=(r.opt.type=="scroll-loop"&&r.opt.loop?r.li.length-2:r.li.length)*r.dotsA.outerWidth(true);r.dots.css({width:w,left:"50%",marginLeft:-w/2})}var t='<div class="scroll-btn-prev'+(q<=1||r.maxPage==0||!r.opt.btn?" none":"")+'">									<a><i>'+(n.axis=="y"?"&and;":"&lt;")+'</i></a>								</div>								<div class="scroll-btn-next'+(q<=1||r.maxPage==0||!r.opt.btn?" none":"")+'">									<a><i>'+(n.axis=="y"?"&or;":"&gt;")+"</i></a>								</div>";r.elem.append(t);r.btnPrev=f(".scroll-btn-prev",r.elem);r.btnNext=f(".scroll-btn-next",r.elem);r.initDotsAClass(0);r.btnNext.off(".kvScroll").on("tap",function(){r.next()});r.btnPrev.off(".kvScroll").on("tap",function(){r.prev()});r.dotsA.off(".kvScroll").on(n.dot.dotsEvent||"tap",function(){if(r.isNotAnimate()){var y=r.curPage=f(this).index();r.scroller((n.type=="scroll-loop"?y+1:y))}});r.addInterval();a.scrollHover(r)}).fail(function(){})},next:function(){var n=this;if(n.isNotAnimate()){var m=++n.curPage,l=n.maxPage;if(m>l){m=n.curPage=n.opt.loop?0:l}this.scroller(m,"next")}},prev:function(){var n=this;if(n.isNotAnimate()){var m=--n.curPage,l=n.maxPage;if(m<0){m=n.curPage=n.opt.loop?l:0}this.scroller(m,"prev")}},scroller:function(n,q){var o=this,m=o.opt,l=o.ul,p=o.li;if(o.isNotAnimate()){o.removeInterval();a[m.type](this,n,q)}},initDotsAClass:function(l){f(".scroll-dots > *",this.elem).eq(l).addClass("active").siblings().removeClass("active")},isNotAnimate:function(){var l=[this.ul.is(":not(:animated)")];f.each(this.li,function(m,n){l.push(f(n).is(":not(:animated)"))});return f.inArray(false,l)<0},addInterval:function(){var m=this;m.removeInterval();var l=setInterval(function(){m.opt.autoPlay&&m.next()},m.opt.time);m.elem.data("interval",l)},removeInterval:function(){var l=this.elem.data("interval");l&&clearInterval(l)},getLiW:function(){return +this.li.outerWidth(true)},getLiH:function(){return +this.li.outerHeight(true)},getDivW:function(){return +f(">div",this.elem).width()},getDivH:function(){return +f(">div",this.elem).height()},getUlMl:function(){return +this.ul.css("marginLeft").replace(/px/ig,"")},getUlMt:function(){return +this.ul.css("marginTop").replace(/px/ig,"")},isStopElem:function(){if(h&&this.opt.stopElem){return f(this.opt.stopElem+":visible",this.li).length==0}return true},start:function(){this.addInterval()},stop:function(){this.removeInterval()},destroy:function(){this.removeInterval();this.ul.removeAttr("style");this.li.removeAttr("style");f(">div:eq(0)",this.elem).removeAttr("style");this.li.remove(".kvScroll-Clone");f(".scroll-dots",this.elem).remove();f(".scroll-btn-prev",this.elem).remove();f(".scroll-btn-next",this.elem).remove();this.btnNext.off();this.btnPrev.off();f(".scroll-dots > *",this.elem).off();this.elem.off();this.ul.off()}};function g(l){var m=[];this.each(function(o,n){var q=f(n),p=q.data("spice.kvScroll");if(!p){q.data("spice.kvScroll",(p=new k(q,l)))}m.push(p)});return m}f.fn.kvScroll=g;f.fn.kvScroll.Constructor=k})(jQuery);
(function(d){var a={events:d.spice.click,dropElem:".menus-events",showElem:".sub-menu",showAnimate:"show",hideAnimate:"hide",speed:["normal","normal"]};var c=function(e,f){var g=this;g.opt=d.extend({},a,f);g.elem=e;g.init()};c.prototype={init:function(){var h=this,f=h.opt,g=h.elem,e=d(f.dropElem,g);if(d.type(f.events)=="array"){e.bind(f.events[0],function(){var i=d(f.showElem,this);h.show(i)}).bind(f.events[1],function(){var i=d(f.showElem,this);h.hide(i)})}else{e.bind(f.events,function(){var i=d(this).siblings(f.showElem);if(i.length===0){i=d(this).parent().siblings(f.showElem)}h[i.is(":visible")?"hide":"show"](i)})}},stop:function(){d(this.opt.showElem).each(function(f,e){d(e).stop(true,true)})},show:function(e){var f=this;f.stop();e.stop(true,true).delay(0)[f.opt.showAnimate](f.opt.speed[0],function(){f.elem.trigger("menuShow",{self:f})})},hide:function(e){var f=this;e.stop(true,true)[f.opt.hideAnimate](f.opt.speed[1],function(){f.elem.trigger("menuHide",{self:f})})}};function b(e){var f=[];this.each(function(h,g){var j=d(g),i=j.data("spice.menus");if(!i){j.data("spice.menus",(i=new c(j,e)))}f.push(i)});return f}d.fn.menus=b;d.fn.menus.Constructor=c})(jQuery);
(function(c){var b="tinyscrollbar",d={axis:"y",wheel:true,wheelSpeed:40,wheelLock:true,touchLock:true,trackSize:false,thumbSize:false,thumbSizeMin:20};function a(s,g){this.options=c.extend({},d,g);this._defaults=d;this._name=b;var q=this,f=s.find(".viewport"),v=s.find(".overview"),t=s.find(".scrollbar"),h=t.find(".track"),n=t.find(".thumb"),z=("ontouchstart" in document.documentElement),w="onwheel" in document.createElement("div")?"wheel":document.onmousewheel!==undefined?"mousewheel":"DOMMouseScroll",j=this.options.axis==="x",k=j?"width":"height",l=j?"marginLeft":"marginTop",y=0;this.contentPosition=0;this.viewportSize=0;this.contentSize=0;this.contentRatio=0;this.trackSize=0;this.trackRatio=0;this.thumbSize=0;this.thumbPosition=0;this.hasContentToSroll=false;function A(){q.update();e();return q}this.update=function(B){var C=k.charAt(0).toUpperCase()+k.slice(1).toLowerCase();this.viewportSize=f[0]["offset"+C];this.contentSize=v[0]["scroll"+C];this.contentRatio=this.viewportSize/this.contentSize;this.trackSize=this.options.trackSize||this.viewportSize;this.thumbSize=Math.min(this.trackSize,Math.max(this.options.thumbSizeMin,(this.options.thumbSize||(this.trackSize*this.contentRatio))));this.trackRatio=(this.contentSize-this.viewportSize)/(this.trackSize-this.thumbSize);this.hasContentToSroll=this.contentRatio<1;t.toggleClass("disable",!this.hasContentToSroll);switch(B){case"bottom":this.contentPosition=Math.max(this.contentSize-this.viewportSize,0);break;case"relative":this.contentPosition=Math.min(Math.max(this.contentSize-this.viewportSize,0),Math.max(0,this.contentPosition));break;default:this.contentPosition=parseInt(B,10)||0}this.thumbPosition=this.contentPosition/this.trackRatio;x();return q};function x(){n.css(l,q.thumbPosition);v.css(l,-q.contentPosition);t.css(k,q.trackSize);h.css(k,q.trackSize);n.css(k,q.thumbSize)}function e(){if(z){f[0].ontouchstart=function(B){if(1===B.touches.length){B.stopPropagation();u(B.touches[0])}}}else{n.bind("mousedown",function(B){B.stopPropagation();u(B)});h.bind("mousedown",function(B){u(B,true)})}c(window).resize(function(){q.update("relative")});if(q.options.wheel&&window.addEventListener){s[0].addEventListener(w,o,false)}else{if(q.options.wheel){s[0].onmousewheel=o}}}function p(){return q.contentPosition>0}function r(){return q.contentPosition<=(q.contentSize-q.viewportSize)-5}function u(C,B){if(q.hasContentToSroll){c("body").addClass("noSelect");y=B?n.offset()[l]:(j?C.pageX:C.pageY);if(z){document.ontouchmove=function(D){if(q.options.touchLock||p()&&r()){D.preventDefault()}m(D.touches[0])};document.ontouchend=i}else{c(document).bind("mousemove",m);c(document).bind("mouseup",i);n.bind("mouseup",i);h.bind("mouseup",i)}m(C)}}function o(D){if(q.hasContentToSroll){var C=D||window.event,E=-(C.deltaY||C.detail||(-1/3*C.wheelDelta))/40,B=(C.deltaMode===1)?q.options.wheelSpeed:1;q.contentPosition-=E*B*q.options.wheelSpeed;q.contentPosition=Math.min((q.contentSize-q.viewportSize),Math.max(0,q.contentPosition));q.thumbPosition=q.contentPosition/q.trackRatio;s.trigger("move");n.css(l,q.thumbPosition);v.css(l,-q.contentPosition);if(q.options.wheelLock||p()&&r()){C=c.event.fix(C);C.preventDefault()}}}function m(D){if(q.hasContentToSroll){var B=j?D.pageX:D.pageY,E=z?(y-B):(B-y),C=Math.min((q.trackSize-q.thumbSize),Math.max(0,q.thumbPosition+E));q.contentPosition=C*q.trackRatio;s.trigger("move");n.css(l,C);v.css(l,-q.contentPosition)}}function i(){q.thumbPosition=parseInt(n.css(l),10)||0;c("body").removeClass("noSelect");c(document).unbind("mousemove",m);c(document).unbind("mouseup",i);n.unbind("mouseup",i);h.unbind("mouseup",i);document.ontouchmove=document.ontouchend=null}return A()}c.fn[b]=function(e){return this.each(function(){if(!c.data(this,"plugin_"+b)){c.data(this,"plugin_"+b,new a(c(this),e))}})}})(jQuery);
(function(a){a.fn.placeholder=function(b){return this.each(function(){var e=a(this);var c=a.extend({text:e.attr("placeholder"),cssClass:"placeholder"},a.type(b)==="string"?{text:b}:(b||{}));e.attr("placeholder",c.text);if("placeholder" in document.createElement("input")){return}if(e.attr("type")=="password"){var d=function(){a(this).val()==""&&a(this).next(".placeholder-text").show()};var f=function(){a(this).next(".placeholder-text").hide()};a('<span class="placeholder-text">'+c.text+"</span>").css({width:e.width(),height:e.height(),"padding-left":e.css("padding-left"),"padding-right":e.css("padding-right"),"padding-top":e.css("padding-top"),"padding-bottom":e.css("padding-bottom"),"font-size":e.css("font-size"),"line-height":e.height()+"px"}).bind("tap",function(){e.trigger("focus")}).insertAfter(e);e.unbind(".placeholder").bind({"focus.placeholder":f,"blur.placeholder":d})}else{var d=function(){if(a.trim(e.val())===""||a.trim(e.val())==e.attr("placeholder")){e.addClass(c.cssClass).val(c.text)}};var f=function(){if(e.val()===c.text){e.val("")}e.removeClass(c.cssClass)};d();e.unbind(".placeholder").bind({"focus.placeholder":f,"blur.placeholder":d})}})}})(jQuery);
(function(c){if(typeof this["loxia"]==="undefined"){var d=this;this.loxia={SUCCESS:"success",ERROR:"error",global:d,debug:false,region:"",dateFormat:"dd/mm/yy",timeFormat:"hh:mm:ss",pageLock:true,onionPage:undefined,windowFeatures:"toolbar=no, menubar=no,scrollbars=yes, resizable=no,location=no, status=no",init:function(e){c.extend(this,e);c(document).loxiatip();if(this.pageLock){c(document).loxiaonion({layer:this.onionPage})}this.initContext()},initContext:function(e){if(e===undefined){e=document.body}if(c(e).attr("loxiaType")){this.initLoxiaWidget(e)}else{c(e).find("div[loxiaType]").each(function(){if(c(this).parents("div[loxiaType]").length>0){return}loxia.initLoxiaWidget(this)});c(e).find("[loxiaType]").each(function(){loxia.initLoxiaWidget(this)})}},initLoxiaWidget:function(e){if(c(e).attr("loxiaType")==="button"){this._initButton(e)}else{this.hitch(c(e),"loxia"+c(e).attr("loxiaType"))()}},byId:function(e){var f=this.isString(e)?c("#"+e):c(e);if(f&&f.data("loxiaType")){return f.data(f.data("loxiaType"))}return null},byCss:function(g,e){var f=[];if(e===undefined){e=document.body}c(g,e).each(function(){if(c(this).data("loxiaType")){f.push(c(this).data(c(this).data("loxiaType")))}});return f},_initButton:function(g){c(g).removeAttr("loxiaType");c(g).button();var e=c(g).attr("icons");if(e){e=e.split(",");var f={primary:e[0]};if(e[1]){f.secondary=e[1]}c(g).button("option","icons",f);if(c(g).attr("showText")){c(g).button("option","text",!(c(g).attr("showText")==="false"))}}},isString:function(e){return typeof e==="string"||e instanceof String},getViewport:function(){var e,f;if(typeof window.innerWidth!="undefined"){e=window.innerWidth,f=window.innerHeight}else{if(typeof document.documentElement!="undefined"&&typeof document.documentElement.clientWidth!="undefined"&&document.documentElement.clientWidth!=0){e=document.documentElement.clientWidth,f=document.documentElement.clientHeight}else{e=document.getElementsByTagName("body")[0].clientWidth,f=document.getElementsByTagName("body")[0].clientHeight}}return{width:e,height:f}},center:function(e,f){var k={},i=0,h=0,j=0,g=0;if(f){k.width=c(f).width();k.height=c(f).height()}else{k=this.getViewport();j=c("html").scrollLeft();g=c("html").scrollTop()}if(f){h=c(f).offset().left;i=c(f).offset().top}c(e).css({position:"absolute",left:(j+h+(k.width-c(e).width())/2)+"px",top:(g+i+(k.height-c(e).height())/2)+"px"})},getTimeUrl:function(e){var f=(new Date()).getTime();if(e.indexOf("loxiaflag=")>=0){e=e.replace(/loxiaflag=\d{13}/,"loxiaflag="+f.toString());return e}e+=(/\?/.test(e))?"&":"?";return(e+"loxiaflag="+f.toString())},encodeUrl:function(h,f){var g=h.indexOf("?");if(g===-1){if(f===undefined||f){return this.getTimeUrl(h)}else{return h}}var e=h.substring(0,g+1),l=h.substring(g+1).split("&");for(var j=0;j<l.length;j++){if(j>0){e+="&"}var k=l[j].split("=");e+=k[0]+"="+encodeURIComponent(k[1])}if(f===undefined||f){e=this.getTimeUrl(e)}return e},getLocaleMsg:function(k,g){var e=this.regional[this.region][k];if(e===undefined||e===null){e=this.regional[this.region][""]}if(e===undefined||e===null){return k}if(!g){return e}if(!c.isArray(g)){g=[g]}var j=e.match(/\{\d+\}/ig);if(!j||j.length===0){return e}e=e.replace(/\{\d+\}/ig,"#");for(var h=0;h<j.length;h++){var f=parseInt(j[h].replace(/\{/,"").replace(/\}/,""));e=e.replace(/\#/,(g[f]!=undefined&&g[f]!=null)?""+g[f]:"")}return e},getObject:function(h,g){g=g||d;var j=h.split(".");for(var f=0,e;g&&(e=j[f]);f++){g=(e in g?g[e]:undefined)}return g},setObject:function(j,h,g){g=g||d;var l=j.split(".");var k=l.pop();for(var f=0,e;g&&(e=l[f]);f++){g=(e in g?g[e]:g[e]={})}return(g&&k?(g[k]=h):undefined)},hitch:function(e,f){if(!f){f=e;e=null}if(this.isString(f)){e=e||d;if(!e[f]){throw (['hitch: scope["',f,'"] is null (scope="',e,'")'].join(""))}return function(){return e[f].apply(e,arguments||[])}}return !e?f:function(){return f.apply(e,arguments||[])}},_ajaxSetValue:function(g,e,f){if(f===null){return}var h=g[e];if(this.isString(h)){g[e]=[h,f]}else{if(c.isArray(h)){g[e].push(f)}else{g[e]=f}}},_ajaxFieldValue:function(g){var e=null,f=(g.type||"").toLowerCase();if(g.name&&f&&!g.disabled){if(f==="radio"||f==="checkbox"){if(g.checked){e=g.value}}else{if(g.multiple){e=[];c("option",g).each(function(){if(this.selected){e.push(this.value)}})}else{e=g.value}}}return e},_getForm:function(e){var g=e;if(this.isString(e)){g=c("#"+e);if(g.length==0){g=c("form[name='"+e+"']")}}return(g instanceof jQuery)?g.get(0):g},_ajaxFormToObj:function(g){g=this._getForm(g);if(!g){return{}}var f={},h=this,e="file|submit|image|reset|button|";c.each(g.elements,function(k,m){var j=m.name,l=(m.type||"").toLowerCase();if(j&&l&&e.indexOf(l)===-1&&!m.disabled){h._ajaxSetValue(f,j,h._ajaxFieldValue(m))}});return f},_ajaxOptions:function(g,h,f){var e={};if(arguments.length===1){e=g}else{e=f||{};e.url=g;if(h){if(this.isString(h)||c(h).is("form")){c.extend(e,{data:this._ajaxFormToObj(h)})}else{c.extend(e,{data:h})}}}return e},asyncXhr:function(f,g,e){c.ajax(this._ajaxOptions(f,g,e))},asyncXhrGet:function(g,h,f){var e=this._ajaxOptions(g,h,f);e.type="GET";c.ajax(e)},asyncXhrPost:function(g,h,f){var e=this._ajaxOptions(g,h,f);e.type="POST";c.ajax(e)},syncXhr:function(g,i,f){var h,e=this._ajaxOptions(g,i,f);c.extend(e,{async:false,success:function(j,k){h=j},error:f.error?f.error:function(k,m,l){h={};var j={};j.message="Error occurs when fetching data from url:"+this.url;j.cause=m?m:l;h.exception=j}});c.ajax(e);return h},syncXhrGet:function(f,g,e){if(arguments.length===1){f.type="GET"}else{e=c.extend({},e,{type:"GET"})}return this.syncXhr(f,g,e)},syncXhrPost:function(f,g,e){if(arguments.length===1){f.type="POST"}else{e=c.extend({},e,{type:"POST"})}return this.syncXhr(f,g,e)},isLocked:function(){if(this.pageLock){var e=c(document).data("ui-loxiaonion");return e.isShown}return false},lockPage:function(){if(this.pageLock){var e=c(document).data("ui-loxiaonion");e.show()}},unlockPage:function(){if(this.pageLock&&this.isLocked()){var e=c(document).data("ui-loxiaonion");e.hide()}},tip:function(f,e){if(f&&e){c(document).loxiatip("show",f,e)}else{c(document).loxiatip("hide")}},openPage:function(e,h,g,f){h=h||"_blank";g=g||this.windowFeatures;if(f&&f.length&&f.length===2){g="width="+f[0]+",height="+f[1]+","+g}return window.open(this.encodeUrl(e),h,g)},val:function(h,g){if(h===undefined){return null}var e=c(h).is("input,select,textarea")?h:c(h).find("input,select,textarea").get(0);if(e){if(this.isWidget(e)){var f=c(e).data("loxiaType");if(f){if(g){c(e).data(f).val(g)}else{return c(e).data(f).val()}}}else{if(g){c(e).val(g)}else{return c(e).val()}}}else{if(g){c(h).text(g)}else{return c(h).text()}}},validateForm:function(h){h=this._getForm(h);var g=[],i=0;c.each(this.byCss("input:enabled,select:enabled,textarea:enabled",h),function(j,k){if(k.state()===null){k.check()}i+=(k.state()?0:1)});if(i>0){g.push(this.getLocaleMsg("VALIDATE_FIELD_ERROR",[i]));return g}var f=c(h).attr("validate");if(!f){f=c(h).attr("name")+"Validate"}if(d[f]&&c.isFunction(d[f])){var e=this.hitch(d[f])(h);if(e!=this.SUCCESS){if(c.isArray(e)){c.each(e,function(k,j){g.push(j)})}else{g.push(e)}}}return g},submitForm:function(f){f=this._getForm(f);var e=this.validateForm(f);if(e.length===0){f.submit()}else{c("body").trigger("formvalidatefailed",[[e,f]])}},isWidget:function(e){return !!c(e).data("loxiaType")},log:function(e){if(!this.debug){return}if(d.console){d.console.log(e)}else{alert(e.outerHTML?"Dom Object: "+e.outerHTML:e)}}};loxia.defaults={required:false,lastRightValue:undefined,checkmaster:"",state:null,errorMessage:null};loxia.regional=[];loxia.regional[""]={INVALID_EMPTY_DATA:"Mandatory field",INVALID_DATA:"Invalid input",INVALID_NUMBER:"Input is not a valid number",INVALID_DATE:"Input is not a valid date",DATA_EXCEED_RANGE:"Input data exceeds range",VALIDATE_FIELD_ERROR:"{0} field error(s) found.",VALIDATE_FORM_ERROR:"Form validation failed:",VALIDATE_ERROR:"{0} field error(s) found.",TABLE_BARBTN_ADD:"Add",TABLE_BARBTN_DELETE:"Delete",TABLE_LOAD_ERROR:"Table Data loading error, please contact Administrator.",LABEL_OK:"OK",LABEL_CANCEL:"Cancel",LABEL_REFRESH:"Refresh",LABEL_PAGE_FIRST:"First Page",LABEL_PAGE_LAST:"Last Page",LABEL_PAGE_PREV:"Prev",LABEL_PAGE_NEXT:"Next",LABEL_PAGE_GOTO:"GO",LABEL_PAGE_INFO:"{0} Pages, {1} Records",LABEL_PAGE_COUNT:"Pages",LABEL_RECORD_COUNT:"Records"};loxia.loxiaWidget={_setValue:function(e){return this.element.val(e)},_getValue:function(){return this.element.val()},_setOption:function(e,f){c.Widget.prototype._setOption.apply(this,arguments);if(e==="readonly"){if(f){this.element.attr("readonly","readonly")}else{this.element.removeAttr("readonly")}}else{if(e==="disabled"){if(f){this.element.attr("disabled","disabled")}else{this.element.removeAttr("disabled")}}}},_initWidget:function(){this.element.data("loxiaType","ui-"+this.widgetName);this.element.removeAttr("loxiaType");this.element.addClass("ui-loxia-default ui-corner-all");this.option("required",(this.element.attr("mandatory")==="true"));if(this.option("required")){this.element.addClass("ui-loxia-highlight")}this.option("disabled",!!this.element.attr("disabled"));this.option("select",(this.element.attr("selectonfocus")==="true"));this.option("lastRightValue",this.element.val()?this.element.val():null);this.option("readonly",!!this.element.attr("readonly"));this.option("checkmaster",this.element.attr("checkmaster")||"")},val:function(f){if(f!=undefined){this._setValue(f);var e=this.check();return this}else{return this.option("lastRightValue")}},setReadonly:function(e){this._setOption("readonly",e)},setEnable:function(e){this._setOption("disabled",!e);if(!e){this.state(null)}},state:function(e,f){if(e===undefined){if(this.option("state")===undefined){return null}return this.option("state")}else{if(e===null||!!e){this.option("state",e===null?null:!!e);this.option("errorMessage",null);this.element.removeClass("ui-loxia-error");if(e===null){this.option("lastRightValue",null)}}else{this.option("state",false);this.option("errorMessage",f);this.element.addClass("ui-loxia-error")}}},check:function(){this.option("state",null);this.option("errorMessage",null);var k=this._getValue();if(this.option("required")&&k===""){this.state(false,loxia.getLocaleMsg("INVALID_EMPTY_DATA"));return false}if(k===this.val()){this.state(true);return true}if(this.option("checkmaster")){var g=this.option("checkmaster").split(",");var j={};for(var f,h=0;f=g[h];h++){if(f in j){continue}j[f]=f;var e=loxia.hitch(f)(k,this);if(e.indexOf(loxia.SUCCESS)!=0){this.state(false,e);return false}if(e.length>8){k=e.substring(8);this._setValue(k)}}}this.state(true);this.option("lastRightValue",k);this.element.trigger("valuechanged",[k]);return true}}}checkLoxiaNumber=function(k,l){var k=c.trim(k);if(!k){return loxia.SUCCESS}var j=k.charAt(0);if(j==="+"||j==="-"){k=k.substring(1)}else{j=""}k=k.replace(/^(0(?=\d))+/,"");var f=l.option("decimal");var i=new RegExp("^\\d+$");if(f){if(f>0){i=new RegExp("^\\d+\\.?\\d{0,"+f+"}$")}else{i=new RegExp("^\\d+\\.?\\d*$")}}else{f=0}if(!i.test(k)){return loxia.getLocaleMsg("INVALID_NUMBER")}k=k.replace(/^\./,"0.");k=k.replace(/\.$/,".0");k=j+k;var g=parseFloat(k),h=l.option("min"),e=l.option("max");if((h!=undefined&&g<h)||(e!=undefined&&g>e)){return loxia.getLocaleMsg("DATA_EXCEED_RANGE")}if(f){return loxia.SUCCESS+"^"+g.toFixed(f)}else{return loxia.SUCCESS}};checkLoxiaDate=function(n,i){var n=c.trim(n);if(!n){return loxia.SUCCESS}try{var k=c.datepicker._getInst(i.element[0]),l=c.datepicker._get(k,"timepicker");var j=c.datepicker.parseDate(loxia.dateFormat,n),h=i.option("min"),f=i.option("max"),g="";if(l){j.setHours(l.hour,l.minute,l.second);l._formatTime();g=l._defaults.separator+l.formattedTime}if((h&&j<h)||(f&&j>f)){return loxia.getLocaleMsg("DATA_EXCEED_RANGE")}}catch(m){return loxia.getLocaleMsg("INVALID_DATE")}return loxia.SUCCESS+"^"+c.datepicker.formatDate(loxia.dateFormat,j)+g};var a={defaultOnion:'<div class="loxiaOnion"><div class="ui-widget-overlay"></div><div class="inner ui-corner-all"><span>LOADING...</span></div></div>',isShown:false,_create:function(){this.onionPage=c(this.defaultOnion).appendTo("body");if(this.options.layer){c(".inner",this.onionPage.get(0)).replaceWith(c(this.options.layer).addClass("inner"))}this.onionPage.hide()},_layout:function(){c(".loxiaOnion .ui-widget-overlay").css({left:c("html").scrollLeft(),top:c("html").scrollTop()});loxia.center(c(".loxiaOnion .inner").get(0))},show:function(){if(this.isShown){return}this.onionPage.show();this._layout();c(window).bind("scroll",this._layout);this.isShown=true},hide:function(){c(window).unbind("scroll",this._layout);this.onionPage.hide();this.isShown=false},destory:function(){this.onionPage.remove()}};c.widget("ui.loxiaonion",a);c.ui.loxiaonion.prototype.options={};var b={defaultTipDiv:'<div class="loxiaTip" style="position:absolute;z-index:10006"><div class="arrow"></div><div class="inner ui-corner-all"  style="padding: .3em .7em; width: auto;"></div></div>',tpSide:"t",isShown:false,_create:function(){this.tipDiv=c(this.defaultTipDiv).appendTo("body");this.tipDiv.hide()},show:function(j,h){this.tipDiv.find(".inner").html(h);var g=this.tipDiv.removeClass("loxiaTip-l loxiaTip-r loxiaTip-t loxiaTip-b").addClass("loxiaTip-"+this.tpSide).find(".arrow"),e=this.tipDiv.width(),f=(e-8)/2;g.css("left",f);this.tipDiv.css({opacity:0});this.tipDiv.show();this.tipDiv.position({my:"right top-21",at:"right top",of:j});if(c(j).attr("shadow")){this.tipDiv.css("position","fixed")}var i=this.tipDiv.position();this.tipDiv.animate({opacity:1,left:i.left,top:i.top-8},"fast");this.isShown=true},hide:function(){this.tipDiv.hide();this.isShown=false},destory:function(){this.tipDiv.remove()}};c.widget("ui.loxiatip",b);c.ui.loxiatip.prototype.options={}})(jQuery);
loxia.regional.zh_CN={INVALID_EMPTY_DATA:"输入不能为空",INVALID_DATA:"输入数据不正确",INVALID_NUMBER:"不是一个合法的数字或精度要求不符合要求",INVALID_DATE:"不是一个合法的日期",DATA_EXCEED_RANGE:"数据超出范围",DATA_LESS_MIN:"小于初始值",DATA_GREATER_MAX:"大于最大值",VALIDATE_FIELD_ERROR:"共发现{0} 处域填写问题[请点击边框为红色的文本框查看出错详细信息]",VALIDATE_FORM_ERROR:"提交数据时发现错误：",VALIDATE_ERROR:"共发现{0} 处填写问题：",TABLE_BARBTN_ADD:"新增行",TABLE_BARBTN_DELETE:"删除选定行",TABLE_LOAD_ERROR:"数据加载错误，请重试或联系系统管理员",LABEL_OK:"确定",LABEL_CANCEL:"取消",LABEL_REFRESH:"刷新",LABEL_PAGE_FIRST:"首页",LABEL_PAGE_LAST:"末页",LABEL_PAGE_PREV:"上一页",LABEL_PAGE_NEXT:"下一页",LABEL_PAGE_GOTO:"GO",LABEL_PAGE_PAGETITLE:"Page",LABEL_PAGE_INFO:"总计{0}页 共{1}条记录",LABEL_PAGE_COUNT:"总页数",LABEL_RECORD_COUNT:"总记录数"};
function loadMiniShoppingCart(){console.log(document.location.protocol);var c=("https:"===document.location.protocol)?"/member/shopping/cart/getShopingCartListInfo.json":"/system/shopping/cart/getShopingCartListInfo.json";var g=loxia.syncXhrPost(c,{});if(g.isSuccess){if(g.description!=null){var f=0;var a=0;var e=g.description.shoppingCartLineCommands;var b=g.description.customCartLineCommands;var d=g.description.customTshirtCartLineCommands;$("#mini_buy_car_position").empty();$("#mini_buy_car").show();if(b!=null){$.each(b,function(i,k){var j=$("#mini_buy_car_product .bc_product_in").clone();var h="http://images.fanatics.com/lf?set=key[name],value["+k.name+"]&set=key[number],value["+k.number+"]&call=url[http://dmimages.ff.p10/chains/"+k.chainsCode+".txt]&scale=size[321]&sink";j.find("img").attr("src",h);cloneObjValue(j,k.customCartLine);console.log("customCartLineGift:"+k.customCartLine.gift);if(!k.customCartLine.gift){f+=1}a+=parseFloat(k.customCartLine.subTotalAmt);j.find("span[myid='mini_buy_car_itemqty']").text(loxia.getLocaleMsg("shoppingcart_qty")+1)})}if(d!=null){$.each(d,function(h,j){var i=$("#mini_buy_car_product .bc_product_in").clone();i.find("img").attr("src",formatImage(j.customCartLine.itemPic,"90X90"));cloneObjValue(i,j.customCartLine);i.find("p[myid='mini_buy_car_salePrice']").text(loxia.getLocaleMsg("shoppingcart_MoneySymbol")+toDecimal2(j.salePrice));i.removeAttr("href");console.log("customCartLineGift:"+j.customCartLine.gift);if(!j.customCartLine.gift&&j.isSelect){f+=parseInt(j.quanty)}a+=parseFloat(j.salePrice*j.quanty);i.find("span[myid='mini_buy_car_itemqty']").text(loxia.getLocaleMsg("shoppingcart_qty")+j.quanty)})}if(e!=null){$.each(e,function(h,j){console.log("shoppingCartLineCommandGift:"+j.gift);var i=$("#mini_buy_car_product .bc_product_in").clone();i.find("img").attr("src",formatImage(j.itemPic,"90X90"));if(!j.gift){f+=parseInt(j.quantity)}a+=parseFloat(j.subTotalAmt);cloneObjValue(i,j)})}console.log("language:"+language);if(language=="zh_TW"){a=Math.round(a).toFixed(2)}console.log(a);$("#my-shopping-cart-totalAmount").text(loxia.getLocaleMsg("shoppingcart_MoneySymbol")+toDecimal2(a));$("#my-shopping-cart-qty").text(f);$(".productCount").html(f+loxia.getLocaleMsg("shoppingcart_Products"))}}}function cloneObjValue(a,b){a.find("p[myid='mini_buy_car_itemname']").text(b.itemName);a.find("span[myid='mini_buy_car_itemqty']").text(loxia.getLocaleMsg("shoppingcart_qty")+b.quantity);if(undefined!=b.skuPropertys&&null!=b.skuPropertys){$.each(b.skuPropertys,function(d,c){if(d==0){a.find("span[myid='mini_buy_car_itemColor']").text(loxia.getLocaleMsg("shoppingcart_color")+c.value)}if(d==1){a.find("span[myid='mini_buy_car_itemSize']").text(loxia.getLocaleMsg("shoppingcart_size")+c.value)}})}a.find("p[myid='mini_buy_car_salePrice']").text(loxia.getLocaleMsg("shoppingcart_MoneySymbol")+toDecimal2(b.salePrice));if(b.validType==1){a.addClass("cart-soldOut")}else{a.attr("href",base+"/item/"+b.productCode)}$("#mini_buy_car_position").append(a)}function pdpMiniCart(e,g,d,i,c,b,a,j,h){loadShoppingCartByCount(c);e.find("img").attr("src",i);if(isNotNull(a)){e.find(".header-cart").attr("href",base+"/item/"+a)}else{e.find(".header-cart").removeAttr("src")}e.find("p[myid='pdp_buy_car_itemname']").text(j);e.find("span[myid='pdp_buy_car_itemqty']").text(loxia.getLocaleMsg("shoppingcart_qty")+c);e.find("span[myid='pdp_buy_car_itemcolor']").text(loxia.getLocaleMsg("shoppingcart_color")+g);e.find("span[myid='pdp_buy_car_itemsize']").text(loxia.getLocaleMsg("shoppingcart_size")+d);var f=parseFloat(c)*parseFloat(b);e.find("p[myid='pdp_buy_car_salePrice']").text(loxia.getLocaleMsg("shoppingcart_MoneySymbol")+toDecimal2(b));$("#pdp-cart-totalAmount").text(loxia.getLocaleMsg("shoppingcart_MoneySymbol")+toDecimal2(f));e.slideDown(function(){h=setTimeout(function(){e.slideUp()},3000)})}function loadMiniCart(f,h,b,i,d,j){loadShoppingCartByCount(b);var e=("https:"===document.location.protocol)?"/member/shopping/cart/getShopingCartInfoByPdp.json":"/system/shopping/cart/getShopingCartInfoByPdp.json";var c=loxia.syncXhrPost(e,{skuId:h});if(c.isSuccess){if(undefined!=c&&null!=c&&c.description!=null){var a=c.description;if(a!=null){f.find("img").attr("src",d);f.find("p[myid='pdp_buy_car_itemname']").text(a.title);f.find("span[myid='pdp_buy_car_itemqty']").text(loxia.getLocaleMsg("shoppingcart_qty")+b);f.find("span[myid='pdp_buy_car_itemcolor']").text(loxia.getLocaleMsg("shoppingcart_color")+"图片色");f.find("span[myid='pdp_buy_car_itemsize']").text(loxia.getLocaleMsg("shoppingcart_size")+j);var g=parseFloat(b)*parseFloat(a.salePrice);f.find("p[myid='pdp_buy_car_salePrice']").text(loxia.getLocaleMsg("shoppingcart_MoneySymbol")+toDecimal2(a.salePrice));$("#pdp-cart-totalAmount").text(loxia.getLocaleMsg("shoppingcart_MoneySymbol")+toDecimal2(g))}f.slideDown(function(){i=setTimeout(function(){f.slideUp()},3000)})}}}function loadShoppingCart(){var a=("https:"===document.location.protocol)?"/member/shopping/cart/count.json":"/system/shopping/cart/count.json";loxia.asyncXhrPost(a,{},{success:function(b){if(undefined!=b&&null!=b){$("#my-shopping-cart-qty").text(b==null?"0":b);$(".productCount").html(b==null?"0":b+loxia.getLocaleMsg("shoppingcart_Products"))}}},{error:function(b){console.log(b)}})}function loadShoppingCartByCount(a){var b=parseInt($("#my-shopping-cart-qty").text())+parseInt(a);$("#my-shopping-cart-qty").text(b);$(".productCount").html(b+loxia.getLocaleMsg("shoppingcart_Products"))}function isNotNull(a){if(null==a||undefined==a||""==a){return false}return true};
(function(){if(!window.console){window.console={}}var c=window.console;var b=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"];for(var d=0,a=b.length;d<a;d++){var e=b[d];if("pro"==profile||!c[e]){c[e]=function(){}}}if(!c.memory){c.memory={}}})();var telphonereg=/^(([0\+]\d{2,3}-)?(0\d{2,3})-)(\d{7,8})(-(\d{3,}))?$/;var key_search_default="输入关键词";var zip_code_pattern=/^[0-9][0-9]{5}$/;var mobile_phone_pattern=/^(1[3-9]{1}[0-9]{1})\d{8}$/;var phone_pattern=new RegExp("");var empty_pattern=new RegExp("/^s+|s+$/g");var illegal_char_pattern=new RegExp("^[^<>]+$");var emailreg=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;$(document).ready(function(){$(".gotoShoppingCart").click(function(){window.location.href=base+"/shopping/cart/list.htm"});$(".buy_car").live("mouseleave",function(){$(this).hide()});$(".subscribe-btn-women").click(function(){memberBookEmail("women",$("#dyemail"))});$(".subscribe-btn-men").click(function(){memberBookEmail("men",$("#dyemail"))});$(".subscribe-btn-women1").click(function(){memberBookEmail("women",$("#dyemail1"))});$(".subscribe-btn-men1").click(function(){memberBookEmail("men",$("#dyemail1"))});loadShoppingCart()});function memberBookEmail(d,c){var a=$(c).attr("value");if(!emailreg.test(a)){showAlert("电子邮件错误,请检查您的e-mail地址.",true);return false}var b=base+"/member/memberBookEmail.json";loxia.asyncXhr(b,{email:a,sex:d},{success:function(e){if(e.returnUrl=="success"){$(".mailAdress").html(a);$(".dialog-magazine").fadeIn();$(".black-opacity").fadeIn();return true}else{if(e.returnUrl=="existed"){$(".mailAdress").html(a);$(".dialog-email").fadeIn();$(".black-opacity").fadeIn();return false}else{showAlert("网络异常，抱歉，邮件订阅失败，请您稍后重试.",true);return false}}}},{error:function(e){showAlert("网络异常，抱歉，邮件订阅失败，请您稍后重试",true)}})}function char_cv(a){if(a!=""){a=a.replace(/</g,"&lt;");a=a.replace(/%3C/g,"&lt;");a=a.replace(/>/g,"&gt;");a=a.replace(/%3E/g,"&gt;");a=a.replace(/'/g,"&#39;");a=a.replace(/"/g,"&quot;")}return a}function isNotNullOrEmpty(a){if(a!=undefined&&a!=null&&a!=""&&a!="undefined"){return true}else{return false}}function isBlank(a){if(a==null){return true}else{if(a==""){return true}else{if(a=="undefined"){return true}else{return false}}}}function isNotBlank(a){return !isBlank(a)}function isEquals(d,c){if(d==c){return true}else{return false}}function isFormatString(a){return illegal_char_pattern.test(a)}function isNotFormatString(a){return !isFormatString(a)}function isFormatMobile(a){return mobile_phone_pattern.test(a)}function isNotFormatMobile(a){return !isFormatMobile(a)}function isFormatZipcode(a){return zip_code_pattern.test(a)}function isNotFormatZipcode(a){return !isFormatZipcode(a)}function isFormatEmail(a){return emailreg.test(a)}function isNotFormatEmail(a){return !isFormatEmail(a)}function isFormatTelephone(a){return telphonereg.test(a)}function isNotFormatTelephone(a){return !isFormatTelephone(a)}function clearValueAndFocus(a){$(a).val("");$(a).focus()}function checkFieldConsignee(a){if(isBlank(a)){return"收货人姓名不能为空，请填写"}else{if($.trim(a)=="请填写正确姓名"){return"收货人姓名不能为空，请填写"}if(isNotFormatString(a)){return"收货人姓名中包含非法字符"}}return""}function checkFieldAddress(a){if(isBlank(a)){return"详细地址不能为空，请填写"}else{if($.trim(a)=="请填写详细路名及门牌号"){return"详细地址不能为空，请填写"}if(isNotFormatString(a)){return"详细地址中包含非法字符"}}return""}function checkFieldZipcode(a){if(isBlank(a)){return"邮政编码不能为空，请填写"}else{if($.trim(a)=="请填写正确的邮政编码"){return"邮政编码不能为空，请填写"}if(isNotFormatZipcode(a)){return"邮政编码格式不正确"}}return""}function checkFieldMobile(a){if(isBlank(a)){return"手机号码不能为空，请填写"}else{if($.trim(a)=="请填写正确的手机号码"){return"手机号码不能为空，请填写"}if(isNotFormatMobile(a)){return"手机号码格式不正确"}}return""}function checkFieldEmail(a){if(isBlank(a)){return"邮箱不能为空，请填写"}else{if($.trim(a)=="请填写正确的邮箱"){return"邮箱不能为空，请填写"}if(isNotFormatEmail(a)){return"邮箱格式不正确"}}return""}function isNull(a){if(a==null||$.trim(a)==""){return true}return false}function isTelPhone(a){var b=/^(\d{4}-|\d{3}-)?(\d{8}|\d{7})$/;return b.test(a)}function isMobile(a){var b=/^(1[3-9]{1}[0-9]{1})\d{8}$/;return b.test(a)}function isZipcode(a){var b=/^[1-9]\d{5}$/;return b.test(a)}function isEmail(b){var a=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;return a.test(b.replace(/(^\s*)|(\s*$)/g,""))}function isFamliyName(b){var a=/^([\u4E00-\u9FA5]{1,10}|[a-zA-Z]{2,14})$/;return a.test(b)}function isBirthDay(a){var b=/^(\d{4})(-)(\d{1,2})(-)(\d{1,2})$/;return b.test(a)}function isPassword(a){var b=/^[a-zA-Z0-9_-]{6,18}$/;return b.test(a)}function isSecurityCode(b){var a=/^[a-zA-Z0-9]{4}$/;return a.test(b)}function checkOpenNewWindow(b){var a=NBA.checkMedia();if(a=="mobile"){$(b).attr("target","")}else{$(b).attr("target","_blank")}}function isFacebookCode(a){if(language=="zh_TW"){fbq("track",a)}};
function formatImage(e,c){if(null==e||undefined==e||""==e){return defaultImg}var a=e.lastIndexOf(".");var b=e.lastIndexOf("_");var d="";if(b!=-1){d=e.substring(0,b)}else{d=e.substring(0,a)}if("source"!=c){d=d+"_";d=d+c}d=d+e.substring(a);return imgbase+d}function toDecimal2(a){var d=parseFloat(a);if(isNaN(d)){return false}var d=Math.round(a*100)/100;var c=d.toString();var b=c.indexOf(".");if(b<0){b=c.length;c+="."}while(c.length<=b+2){c+="0"}return c}function getHandlebarsTemplate(b){var a=Handlebars.compile(b);Handlebars.registerHelper({imageUrlHelper:function(c,d){var e="";if(null==d||""==d||undefined==d||$.type(d)!="string"){e=imgbase+c}else{e=formatImage(c,d)}console.log("returnUrl:%o",e);return e},hrefHelper:function(c){return base+"/item/"+c},formatPriceHelper:function(c){return toDecimal2(c)},priceCompareHelper:function(e,c,d){if(e!=c){return d.fn(this)}return d.inverse(this)},pdpPriceCompareHelperOne:function(e,c,d){if(null!=c&&c>0&&c!=e){return d.fn(this)}if(null!=c&&(c<=0||c==e)){return d.inverse(this)}},pdpPriceCompareHelperTwo:function(e,c,d){if(null==c){return d.fn(this)}},imgDefaultCompareHelper:function(d,c){if(null!=d){return c.fn(this)}return c.inverse(this)},formatDateHelper:function(c,d){return moment(c).format(d)},equals:function(e,d,c){if(e==d){return c.fn(this)}return c.inverse(this)},smaller:function(e,d,c){if(e<=d){return c.fn(this)}return c.inverse(this)}});return a}function renderTemplateHtmlToSelector(a,d,c){var b=c(d);console.log("selector:%o,html:%o",a,b);$(a).html(b)}function loadJsonjsonDataAndRenderTemplateHtmlToSelector(a){console.log("renderConfig is:%o",a);loxia.asyncXhrPost(a.url,a.params,{success:function(d){if(null!=d&&""!=d&&!$.isEmptyObject(d)){console.log("return jsonData:%o",d);var b=true;if($.isFunction(a.beforeRenderjsonDataEvent)){b=a.beforeRenderjsonDataEvent(d)}if(!b){return}var c=getHandlebarsTemplate($(a.renderTemplateSelector).html());renderTemplateHtmlToSelector(a.renderToSelector,a.parseRenderjsonData(d),c);if($.isFunction(a.afterRenderjsonDataEvent)){a.afterRenderjsonDataEvent(d)}}else{console.warn("[%o] jsonData is null or empty,nothing to do!!!",a.renderToSelector)}}},{error:function(b){console.log(b)}})};
$(function(){var c=$.spice,e=$("body"),g=$(window);if(!c||$.isEmptyObject(c)){return false}NBA=window.NBA||{};NBA.checkMedia=function(){var h=$(window).width();if(h<=767){return"mobile"}else{if(h>767&&h<=1024){return"pad"}else{return"pc"}}};var a=NBA.checkMedia(),b=NBA.checkMedia();NBA.alert=function(h){c.dialog(h)};NBA.tips=function(h){c.tips(h)};if(!!e.kvScroll){NBA.scroll=function(h,j){var k=$.extend({},{type:"scroll-loop",autoPlay:true,btn:false,loop:true,dot:{style:"dot"}},h);if(k.type!="scroll"&&k.type!="scroll-loop"){k.type="scroll-loop"}$(j||".events-kvScroll").kvScroll(k)};NBA.scroll();NBA.scrollX=function(h,j){var k=$.extend({},{type:"scroll-loop",autoPlay:true,loop:true,dot:{style:"dot"}},h);if(k.type!="scroll"&&k.type!="scroll-loop"){k.type="scroll-loop"}k.axis="x";$(j||".events-kvScroll-x").kvScroll(k)};NBA.scrollX();NBA.scrollY=function(h,j){var k=$.extend({},{type:"scroll-loop",autoPlay:true,loop:true,easing:1000,axis:"y"},h);if(k.type!="scroll"&&k.type!="scroll-loop"){k.type="scroll-loop"}k.axis="y";$(j||".events-kvScroll-y").kvScroll(k)};NBA.scrollY();NBA.scrollFade=function(h,j){var k=$.extend({},{type:"fade",autoPlay:true,loop:true,dot:{style:"dot"}},h);k.type="fade";$(j||".events-kvScroll-fade").kvScroll(k)};NBA.scrollFade();NBA.scrollGallery=function(h,j){var k=$.extend({},{type:"gallery",autoPlay:false,loop:false,moveNum:2},h);k.type="gallery";$(j||".events-kvScroll-gallery").kvScroll(k)};NBA.scrollGallery();NBA.scrollGalleryX=function(h,j){var k=$.extend({},{type:"gallery",autoPlay:false,loop:false,moveNum:2,axis:"x"},h);k.type="gallery";k.axis="x";$(j||".events-kvScroll-gallery-x").kvScroll(k)};NBA.scrollGalleryX();NBA.scrollGalleryY=function(h,j){var k=$.extend({},{type:"gallery",autoPlay:false,loop:false,moveNum:1,axis:"y"},h);k.type="gallery";k.axis="y";$(j||".events-kvScroll-gallery-y").kvScroll(k)};NBA.scrollGalleryY();NBA.scrollGalleryRes=function(k,l){var h=$(l||".events-kvScroll-gallery-res"),m=true,j=null;h.data({preMediaType:""});$(window).on("resize.events-kvScroll-gallery-res",function(){var n=NBA.checkMedia();m=h.data("preMediaType")==n?false:true;clearTimeout(j);j=setTimeout(function(){if(m){var t=$("li:not([class*=kvScroll-Clone])",h),s=5,r=0;$.browser.safari&&(r=0.02);if(h.data("spice.kvScroll")){h.data("spice.kvScroll").destroy();h.removeData("spice.kvScroll")}if(n=="pc"){s=5}else{if(n=="pad"){s=3}else{s=2}}t.removeClass("block");var p=t.length*3,q=$.extend({},{type:"gallery-loop",autoPlay:false,loop:true,moveNum:1,axis:"x"},k);q.type="gallery-loop";q.axis="x";h.kvScroll(q);$("ul",h).css({width:(p/s)*100+"%"});t.css({width:(100/p-r)+"%"}).removeClass("none")}},0);h.data({preMediaType:NBA.checkMedia()})}).trigger("resize.events-kvScroll-gallery-res")};NBA.scrollGalleryRes();NBA.scrollBgLink=function(s,l){var p=$(l||".events-kvScroll-bgLink"),q=false,n=[],r=0,j=0;var k=true;p.find("img").each(function(){if(!$(this).attr("bg-src")){k=false}});var m=p.find("img").length>1?true:false;if(k){$(window).on("resize.events-kvScroll-bgLink",function(){var t=NBA.checkMedia(),o=!p.data("bg-load");if(t=="pc"){if(o){p.find("img").each(function(){var u=new Image();u.src=$(this).attr("bg-src");n.push(u)});$("body>.container").addClass("hasBg");$(n).each(function(v,u){$(u).load(function(){j++;if(j==n.length){q=true;if($(".notice-content").hasClass("noticesLaod")){$('<div class="content-bg content-add-bgtop"><div class="add-bg"></div></div>').prependTo("body")}else{$('<div class="content-bg"><div class="add-bg"></div></div>').prependTo("body")}$(".content-bg").find("div").append(n[r]).end().show()}})});p.data({"bg-load":true})}else{if(j==n.length){q=true}}}else{q=false}}).trigger("resize.events-kvScroll-bgLink")}var h=$.extend({},{type:"scroll-loop",autoPlay:true,btn:true,loop:true,dot:{style:"dot"},type:"fade",callBack:function(o){r=o%p.find("li").length;if(q&&m){$(".content-bg").hide().find("div").html(n[r]).end().fadeIn()}}},s);p.kvScroll(h)};if($(".events-kvScroll-bgLink").length>0){NBA.scrollBgLink()}}var f=$(".events-top");f.on("tap",function(){$("body, html").animate({scrollTop:0},300);return false});g.scroll(function(){var j=$(this),h=j.scrollTop();f[h>j.height()?"show":"hide"]()}).scroll();if(!!e.placeholder){NBA.placeholder=function(h){$("input[type=text], input[type=password], textarea").add($()).placeholder($.extend({},{},h))};NBA.placeholder()}if(!!e.lazyLoad){NBA.lazyLoad=function(h,j){$(j||"img[lazy-src]").lazyLoad($.extend({},{},h))};NBA.lazyLoad()}if(!!e.CloudZoom){NBA.CloudZoom=function(k,l){var j=$(l||".events-cloudzoom");if(j.length!=0){$(".cloudzoom-blank").remove();var h=j.data("CloudZoom");h&&h.destroy();var m=$.extend({},{animationTime:0,easeTime:0,zoomWidth:200,zoomHeight:350,zoomOffsetX:20},k);j.CloudZoom(m)}};NBA.CloudZoom();NBA.CloudZoomInside=function(k,l){var j=$(l||".events-cloudzoom-inside");if(j.length!=0){$(".cloudzoom-blank").remove();var h=j.data("CloudZoom");h&&h.destroy();var m=$.extend({},{animationTime:0,easeTime:0,zoomWidth:200,zoomHeight:350,zoomOffsetX:20,zoomPosition:"inside"},k);j.CloudZoom(m)}};NBA.CloudZoomInside()}if(!!e.dropdown){NBA.dropdown=function(h,j){var l=$.extend({},{},h),k=$(j||".events-dropdown").dropdown(l);$.each(k,function(o,n){$(n.opt.showElem,n.elem).find("li").bind("tap",function(){var m=$(this),p=m.text();m.addClass("selected").siblings().removeClass("selected");$(n.opt.dropElem,n.elem).find("span").html(p)})})};NBA.dropdown()}if(!!e.calculateNum){NBA.calculateNum=function(h,j){var k=$.extend({},{btnMinus:".events-minus",btnPlus:".events-plus",textInput:".events-input",max:10,min:0},h);$(j||".events-calculate-num").calculateNum(k)}}var d=".scroll-btn-component";$("body").on($.spice.mouseenter,".scroll-btn-cta",function(){var l=$(this),k=l.closest(".scroll-container"),j=l.closest(d),m=j.css("zIndex"),h=$(".scroll-dots",l.closest(".scroll")).css("zIndex");l.addClass("is-open");j.css("zIndex",++m);k.css("zIndex",++h)}).on($.spice.mouseleave,".scroll-btn-cta",function(){var k=$(this),h=k.closest(d),j=k.closest(".scroll-container");k.removeClass("is-open");h.add(j).removeAttr("style")});NBA.headerSet=function(){var s=$(".menus-events","#header"),o=$(".sub-menu","#header"),p=$(".header-menu","#header"),x=$(".header-nav .nav"),J=$(".header-dami"),K,y=$("#header .container"),n=$(".header-box"),r=$(".header-nav"),N=$(".header-nav-cover"),H=$(".events-cartMenu"),L=$(".events-cartSubMenu"),A=$(".events-mbMenu"),M=$(".events-mbSubMenu"),E=function(){K=$(this).find(".sub-menu").eq(0);if(K.is(":hidden")){o.stop().hide();K.slideDown()}},F=function(){K=$(this).find(".sub-menu").eq(0);K.stop().slideUp()},v=function(){loadMiniShoppingCart();var Q=$("#my-shopping-cart-qty").text();if(Q==0){return false}if(L.is(":hidden")){L.slideDown(function(){L.data({isSlide:false})})}var P=$(".header-cart-scroll"),O=parseInt($(".header-cart-scroll .viewport").css("max-height"));$headerCartH=$(".header-cart-scroll .overview").height();if($headerCartH>O){P.removeData("plugin_tinyscrollbar").tinyscrollbar({wheelLock:true,touchLock:true});P.find(".scrollbar").show()}else{P.find(".scrollbar").hide()}},C=function(){!L.data("isSlide")&&L.slideUp(function(){L.data({isSlide:true})})},m=function(){K=$(this).siblings(".sub-menu");$thisLi=$(this).closest(".menus-events");if(K.is(":hidden")){x.addClass("isShow").find("li").removeClass("isSlided");$thisLi.addClass("isSlided")}else{$thisLi.removeClass("isSlided");x.removeClass("isShow")}if(K.length>0&&K.css("display")=="block"){return false}},w=function(){var P=x.find(">li>a").eq($(".header-dami li>a").index($(this))),O=P.closest("li");J.removeClass("isShow");x.addClass("isShow");O.addClass("isSlided");return false},z=function(){if(J.hasClass("isShow")){J.removeClass("isShow")}else{if(x.hasClass("isShow")){x.removeClass("isShow").find("li").removeClass("isSlided")}else{J.addClass("isShow")}}return false},l=function(P){if($("body").hasClass("nba-pad")){var O=$(P.target);if(O.closest(".events-navPadCheck").length==0){x.removeClass("isShow").find("li").removeClass("isSlided");J.removeClass("isShow")}}},G=function(){K=$(this).siblings(".sub-menu");if(K.is(":hidden")){$(this).hide().closest(".menus-events").siblings("li").hide();K.show().animate({left:"0"})}return false},t=function(){r.hide();x.hide().css({left:"-100%"}).find("li").show();o.hide().css({left:"-100%"});s.find(">a").show();return false},h=function(){if(x.is(":hidden")){r.show();x.show().animate({left:"0"})}else{r.hide();x.hide().css({left:"-100%"});o.hide().css({left:"-100%"})}return false},q=function(){var O=$(this).parent();if(O.hasClass("on")){O.removeClass("on");if(O.hasClass("events-teamDl")){O.siblings(".events-mbMenuBox").addClass("on")}}else{O.addClass("on");if(O.hasClass("events-teamDl")){O.siblings(".events-mbMenuBox").removeClass("on")}}return false},D=function(){$(".nba-pc #header .menus-events").live($.spice.mouseenter,E).live($.spice.mouseleave,F);$(".nba-pc .events-cartMenu").live($.spice.mouseenter,v).live($.spice.mouseleave,C);$(".nba-pad #header .menus-events>a").live("tap",m);$(".nba-pad #header .header-menu").live("tap",z);$(document).on("tap.headerMenu",l);$(".nba-pad .header-dami a").live("tap",w);$(".nba-mob #header .menus-events>a").live("tap",G);$(".nba-mob #header .header-menu").live("tap",h);$(".nba-mob .events-mbMenu").live("tap",q);$(".nba-mob .header-nav-cover").live("tap",t)},u=function(){if(a!=b){x.removeAttr("style").removeClass("ul-active isShow").find("li").removeClass("li-active").removeAttr("style");o.removeAttr("style");L.removeAttr("style");r.removeAttr("style");s.removeAttr("style").find(">a").removeAttr("style")}};D();n.data("setScroll",false);var B=function(){var P=a=="pc"?119:122,O=n.hasClass("header-fixed"),Q=$(".sub-menu","#header");if($(window).scrollTop()>P){if(!O){n.addClass("header-fixed")}}else{if(O){n.removeClass("header-fixed")}}},k=function(){var P=n.data("setScroll"),O=n.hasClass("header-fixed"),Q=a=="pc"?119:122;if(a=="mobile"){if(P){$(window).off("scroll",B);n.data("setScroll",false)}if(O){n.removeClass("header-fixed")}}else{if(!P){$(window).on("scroll",B);n.data("setScroll",true)}if($(window).scrollTop()>Q){n.addClass("header-fixed")}else{n.removeClass("header-fixed")}}};var I=function(){var O=$("body");O.removeClass("nba-pc nba-pad nba-mob");switch(a){case"pc":O.addClass("nba-pc");break;case"pad":O.addClass("nba-pad");break;case"mobile":O.addClass("nba-mob");break}},j=function(){u();I();k()};$(window).on("resize.headerResize",function(){a=NBA.checkMedia();j();b=NBA.checkMedia()}).trigger("resize.headerResize")};NBA.headerSet();$(".clickToPage").on("tap",function(h){h.stopPropagation()});NBA.getDialogTemplate=function(j){var h='<div class="dialog">                    <div class="dialog-container"></div>                    <a class="icon icon-close dialog-close"></a>                </div>';return $(h).find(".dialog-container").html(j).end()};NBA.teamChoose=function(k,j){var p=$.extend({},{teamMado:".events-teamDialog",addBtn:".events-addTeam",box:".events-teamBox",teamLab:".events-teamLab"},j);var h=$(p.teamMado),q=$(p.addBtn),n=$(p.box),m=n.find(p.teamLab),l=k;MaxNum=3;h.find(".events-check").on("tap",function(){var r=$(this),o=h.find(".events-check.on").length;if(r.hasClass("on")){r.removeClass("on");if(h.hasClass("checkedMax")){h.removeClass("checkedMax")}}else{if(o<MaxNum){r.addClass("on");if(o==2){h.addClass("checkedMax")}}}});h.find(".events-checkAll").on("tap",function(){var r=h.find(".events-check.on"),t=h.find(".events-check.on.events-other").siblings("dd");var o=/[^a-zA-Z ]$/g,s=false;t.find("input").each(function(){if(!$(this).val().replace(/(^\s*)|(\s*$)/g,"")==""){if(o.test($(this).val())||$(this).val()==""){$(this).closest(".form-input").addClass("is-error");s=true}else{$(this).closest(".form-input").removeClass("is-error")}}else{$(this).closest(".form-input").addClass("is-error");s=true}});if(s){return false}n.find(".events-teamLab").remove();r.each(function(v,u){var x=u,v=h.find(".events-check").index(x),y=$(this).hasClass("events-other")?$(this).siblings("dd").find("input").val():$(this).find("span").html(),z=$(this).attr("id"),w=$('<div id="'+z+'" class="log-teamBox events-teamLab"><i class="icon icon-team-plus"></i>'+y+"</div>");w.attr({lab_index:v});w.on("tap",function(){var A=$(this);v=A.attr("lab_index");A.hide().remove();h.find(".events-check").eq(v).removeClass("on");if(h.hasClass("checkedMax")){h.removeClass("checkedMax")}q.show()});n.prepend(w);if(n.find(".events-teamLab").length==MaxNum){q.hide()}});l.hide()});m.on("tap",function(){var o=$(this);i=o.attr("lab_index");o.hide().remove();h.find(".events-check").eq(i).removeClass("on");if(h.hasClass("checkedMax")){h.removeClass("checkedMax")}q.show()})};NBA.teamDialogGet=function(h){var k=h,l=k.find(".events-check"),j=[];l.each(function(){var o=$(this);if(o.hasClass("on")){var n={},m=l.index(o);n.index=m;if(o.hasClass("events-other")){var p=o.siblings(".form-input").find("input").val();n.val=p}j.push(n)}});k.data({reset:j})};NBA.teamDialogReset=function(k){var m=k,n=m.find(".events-check"),l=m.data("reset");n.removeClass("on");m.find("input").val("");m.find(".is-error").removeClass("is-error");m.find(".checkedMax").removeClass("checkedMax");if(l.length>0){l.length==3&&m.find(".events-playerDialog").addClass("checkedMax");for(var j=0;j<l.length;j++){var h=l[j].index;n.eq(h).addClass("on");!!l[j].val&&n.eq(h).siblings(".form-input").find("input").val(l[j].val)}}};NBA.setDateOption=function(u){var j=$(".events-birthday"),y=j.find(".events-birth-day .btn"),p=j.find(".events-birth-month .btn"),t=j.find(".events-birth-year .btn"),h=j.find(".events-birth-day select"),k=j.find(".events-birth-month select"),w=j.find(".events-birth-year select"),s=$.parseJSON(j.attr("def-tx")),z=s.year,o=s.month,q=s.day,x=function(E,A){var C=E,D=A,B=new Date(C,D,0);return B.getDate()};var l=new Date(),r=l.getFullYear(),n=r-100;y.find("span").html(q);p.find("span").html(o);t.find("span").html(z);w.html("");for(var v=r;v>=n;v--){w.append("<option>"+v+"</option>")}w.prepend("<option>"+z+"</option>");k.html("");for(var v=1;v<=12;v++){k.append("<option>"+v+"</option>")}k.prepend("<option>"+o+"</option>");var m=function(){var G=$(this),I=G.siblings(".btn").find("span"),B=G.find("option:selected").text();I.html(B);var H=$(".events-birth-year .btn span").html(),B=$(".events-birth-month .btn span").html(),F=x(H,B);var D=$(".events-birth-day .btn span").html();if(D>F){$(".events-birth-day .btn span").html(F)}var J=/[^0-9]/g;if(J.test(F)||F==""){F=31}h.html("");var C=$(".events-birth-day .btn span").html();for(var E=1;E<=F;E++){var A=$("<option>"+E+"</option>");E==C&&A.attr({selected:"selected"});h.append(A)}h.prepend("<option>"+q+"</option>");if(J.test(C)){h[0].options.selectedIndex=-1}};$(".events-birth-month select").on("change.day",m).trigger("change.day");$(".events-birth-year select").on("change.day",m).trigger("change.day");$(".events-birth-day select").on("change",function(){var B=$(this),A=B.siblings(".btn").find("span");A.html(B.find("option:selected").text())})};NBA.setStockNote=function(){var h=$(".events-stockNote");if(!$.spice.hasTouch){h.on("mousemove",function(n){var m=$(this),k=m.find(">div"),o=n.pageX,l=n.pageY,j=m.offset().left,p=m.offset().top;k.css({display:"block",left:Math.floor(o-j),top:Math.floor(l-p)})});h.on("mouseleave",function(){var k=$(this),j=k.find(">div");j.css({display:"none",left:0,top:0})})}};NBA.footerQrcode=function(){$(".nba-pc .events-footer-qrCode>a").live("mouseenter",function(){$(this).closest(".events-footer-qrCode").addClass("active")}).live("mouseleave",function(){$(this).closest(".events-footer-qrCode").removeClass("active")});$(".nba-pad .events-footer-qrCode>a").live("tap",function(){var h=$(this).closest(".events-footer-qrCode");if(h.hasClass("active")){h.removeClass("active")}else{$(".events-footer-qrCode").removeClass("active");h.addClass("active")}});$(document).on("tap",function(j){if($("body").hasClass("nba-pad")){var h=$(j.target);if(h.closest(".events-footer-qrCode").length==0){$(".events-footer-qrCode").removeClass("active")}}})};NBA.footerQrcode();NBA.srcChange=function(j){var h=function(){var k=$(window).width();if(k<=767){return"mobile"}else{if(k>767&&k<=768){return"pad-vertical"}else{if(k>768&&k<=1024){return"pad-horizontal"}else{return"pc"}}}};$(j||".events-srcChange").each(function(){var m=$(this),k=$.parseJSON(m.attr("data-image")),l=m.parent();l.data({"data-image":k,"data-image-str":m.attr("data-image"),media:false})});$(window).on("resize.srcChange",function(){var k=h();$(j||".events-srcChange").each(function(){var m=$(this),l=m.parent(),o=m.attr("class"),n;if(l.data("media")!=k){switch(k){case"pc":n=l.data("data-image").pc;break;case"pad-horizontal":n=l.data("data-image").ipadH;break;case"pad-vertical":n=l.data("data-image").ipadV;break;case"mobile":n=l.data("data-image").mobile;break}n=$.isPlainObject(n)?n.medium:n}if(!!n){m.remove();l.append('<img class="'+o+'" src="'+n+"\" data-image='"+l.data("data-image-str")+"'  >")}l.data({media:k})})}).trigger("resize.srcChange")};NBA.srcChange();$("#answer-activity-dialog .dialog").hide()});
// 注销登录URL
var logoutUrl = "/system/logout.json";
// 切换语言URL
var _langUrl = "/index/lang/";


$(function() {
	
	checkLoginStatus($("#loginStatus"));
	
	$("#loginStatus").on('tap', function() {
		if ($(this).hasClass('loginOK')) {
			logout();
		}
	});
	
	checkLoginStatus($("#loginStatusMobile"));
	$("#loginStatusMobile").on('tap', function() {
		if ($(this).hasClass('loginOK')) {
			logout();
		}
	});
	
	$("a[name=langBtn]").on('tap', function() {
		
		var _lang = $(this).attr("val");
		
		var _t = new Date().getTime();
		
		_langUrl=_langUrl+_lang+"?v="+_t;
		loxia.asyncXhrGet(_langUrl, {}, {
		    success: function(data, textStatus){
		    	if (data.code='success') {
		    		location.reload();
		    	}
		    }
		});
	});
	
	if(s_lang=='zh_HK'){
		$('a[name=langBtn]').eq(0).removeClass('lang-active');
		$('a[name=langBtn]').eq(1).addClass('lang-active');
	}else if(s_lang=='en'){
		$('a[name=langBtn]').eq(0).addClass('lang-active');
		$('a[name=langBtn]').eq(1).removeClass('lang-active');
	}
	
    //搜索
    $('.c-search-btn').click(function(){
    	var keywords = $(this).parents('.form-input').find('#keywords').val();
    	var keywordsTwo = $('#keywordsDefault').val();
    	if (null == keywords || undefined == keywords || "" == keywords) {
    		keywords=keywordsTwo;
        }
    	window.location.href= base + "/search.htm?keyword="+encodeURI(keywords);
    });
    $('.c-search-con').keydown(function(event){
    	if(!event) event = window.event;
    	if (event.keyCode == 13) {
        	var keywords = $(this).val();
        	var keywordsTwo = $('#keywordsDefault').val();
        	if (null == keywords || undefined == keywords || "" == keywords) {
        		keywords=keywordsTwo;
            }
        	window.location.href= base + "/search.htm?keyword="+encodeURI(keywords);
		}
    });
    
    //球员有关商品搜索
    $('.c-player-search-btn').click(function(){
    	var keywords = $(this).parents('.form-input').find('#player-keywords').val();
    	if (null == keywords || undefined == keywords || "" == keywords) {
            return;
        }
    	var playerType = true;
    	window.location.href= base + "/search.htm?keyword="+encodeURI(keywords)+"&playerType="+playerType;
    });
    $('.c-search-con-player').keydown(function(event){
    	if(!event) event = window.event;
    	if (event.keyCode == 13) {
        	var keywords = $(this).val();
        	var playerType = true;
        	if (null == keywords || undefined == keywords || "" == keywords) {
                return;
            }
        	window.location.href= base + "/search.htm?keyword="+encodeURI(keywords)+"&playerType="+playerType;
		}
    });
    

});

/**
 * 注销登录
 */
function logout() {
	
	console.log(document.location.protocol);
	logoutUrl = ('https:' === document.location.protocol) ? "/member/logout.json" : "/system/logout.json";
	loxia.asyncXhrGet(logoutUrl, {}, {
	    success: function(data, textStatus){
	    	if (data.isSuccess && isNotNullOrEmpty(data.returnUrl)) {
	    		window.location.href = base + data.returnUrl;
	    	}
	    }
	});
}

/**
 * 动态校验登录状态
 * @param obj
 */
function checkLoginStatus(obj){
	if (null == obj || undefined == obj) {
		return ;
	}
	
	var validateUrl = ('https:' === document.location.protocol) ? "/member/checkLoginStatus.json" : "/system/checkLoginStatus.json";
	loxia.asyncXhrGet(base + validateUrl, {}, {
		success: function(data, textStatus){
			if (data.isSuccess) {	// 已登录状态
				if(!obj.hasClass('loginOK')){
					obj.addClass('loginOK');
				}
				obj.html('<a href="javascript:void(0);">' + loxia.getLocaleMsg("index_header_login_logout") + '</a>');
			} else {
				if(obj.hasClass('loginOK')){
					obj.removeClass('loginOK');
				}
				obj.html('<a href="' + base + '/member/login.htm">' + loxia.getLocaleMsg("index_header_login_signup") + '</a>');
			}
		}
	});
}
var noticeContentUrl=("https:"===document.location.protocol)?"/member/noticeList.json":"/system/noticeList.json";$(function(){var b=false;var a=false;$(".content-bg").removeClass("content-add-bgtop");$(window).scroll(function(){var d=$(window).scrollTop();var c=d>0?"hide":"show";if(b){$(".renav")[c]()}if(d>0){$(".content-bg").removeClass("content-add-bgtop");$(".notice-content").removeClass("noticesLaod")}else{$(".content-bg").addClass("content-add-bgtop");$(".notice-content").addClass("noticesLaod")}if(a){$(".content-bg").removeClass("content-add-bgtop");$(".notice-content").removeClass("noticesLaod")}}).scroll();loxia.asyncXhrPost(noticeContentUrl,{},{success:function(d,f){if(d.isSuccess&&isNotNullOrEmpty(d.description)){$(".content-bg").addClass("content-add-bgtop");$(".notice-content").addClass("noticesLaod");$(".renav ul").empty();if(d.description.length==1){if(isNotNullOrEmpty(d.description[0].url)){$(".renav ul ").append("<li><a href='"+d.description[0].url+"'>"+d.description[0].message+"</a></li>")}else{$(".renav ul ").append("<li><a>"+d.description[0].message+"</a></li>")}}else{$.each(d.description,function(g,h){if(isNotNullOrEmpty(h.url)){$(".renav ul ").append("<li><a href='"+h.url+"'>"+h.message+"</a></li>")}else{$(".renav ul ").append("<li><a>"+h.message+"</a></li>")}});rollnotice()}$(".renav").attr("style","display:block;");b=true;var e=$(window).scrollTop();var c=e>0?"hide":"show";if(b){$(".renav")[c]()}if(e>0){$(".content-bg").removeClass("content-add-bgtop");$(".notice-content").removeClass("noticesLaod")}else{$(".content-bg").addClass("content-add-bgtop");$(".notice-content").addClass("noticesLaod")}}else{a=true;$(".renav").attr("style","display:none;");$(".content-bg").removeClass("content-add-bgtop");$(".notice-content").removeClass("noticesLaod")}}})});function rollnotice(){var b;b=setInterval(function(){a($(".renav"))},3000);function a(d){var e=d.find("ul:first");var c=e.find("li:first").height();e.animate({"margin-top":-c+"px"},600,function(){e.css({"margin-top":"0px"}).find("li:first").appendTo(e)})}};